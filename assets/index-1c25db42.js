import{j as e,l as B,r as k,d as w,f as l,h as s,L as p,a2 as E}from"./index-c947d73c.js";import{u as T}from"./useBookings-91e7e3fe.js";import{u as A}from"./useTechnicians-35f3a734.js";import{S as P}from"./Spinner-385056f3.js";import{C as S}from"./react-apexcharts.min-ee1cd4c7.js";import{C as y}from"./CardTitle-698f848e.js";import{S as I}from"./index-c5766426.js";import"./useQuery-e382baee.js";import"./useMutation-1e28e3fa.js";import"./Dropdown-9d8df827.js";import"./DataKey-e12315fd.js";import"./useWindow-e0ec882a.js";import"./NavContext-882c4da5.js";import"./hook-20466ebe.js";import"./useIsomorphicEffect-b20f417b.js";import"./InputGroupContext-187f324a.js";import"./NavbarContext-22c2b4c3.js";import"./Button-3c824970.js";const F=({className:t,children:d,tag:i="div"})=>{const o=i;return e.jsx(o,{className:B("timeline-alt","py-0",t),children:d})},b=({className:t,children:d,tag:i="div"})=>{const o=i;return e.jsx(o,{className:B("timeline-item",t),children:d})},Y=()=>{const{data:t,isLoading:d}=T({pageSize:1e3}),{data:i=[],isLoading:o}=A({}),m=(t==null?void 0:t.items)||[],h=(t==null?void 0:t.totalCount)||m.length,n=k.useMemo(()=>{const x=new Date,j=new Date(x.getFullYear(),x.getMonth(),x.getDate()),r=new Date(j);r.setDate(r.getDate()-7);const c=new Date(j);c.setMonth(c.getMonth()-1);const N=m.filter(a=>a.createdAt?new Date(a.createdAt)>=j:!1).length,g=m.filter(a=>a.createdAt?new Date(a.createdAt)>=r:!1).length,v=m.filter(a=>a.createdAt?new Date(a.createdAt)>=c:!1).length,u=m.filter(a=>{const f=typeof a.status=="string"?parseInt(a.status):a.status;return f===0||f===1}).length,D=m.reduce((a,f)=>a+(f.totalPrice||0),0),C=i.length,L=i.filter(a=>a.status===2).length,M=i.filter(a=>a.status===1).length,R=i.filter(a=>a.status===3).length;return{totalBookings:h,todayBookings:N,weekBookings:g,monthBookings:v,pendingBookings:u,totalRevenue:D,totalTechnicians:C,approvedTechnicians:L,pendingTechnicians:M,rejectedTechnicians:R}},[m,i,h]);return d||o?e.jsx(w,{children:e.jsx(l,{xs:12,children:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(P,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading metrics..."})]})})}):e.jsxs(w,{children:[e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Total Bookings"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.totalBookings})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-primary bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-primary",children:e.jsx("i",{className:"uil uil-calendar-alt font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Today's Bookings"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.todayBookings})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-success bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-success",children:e.jsx("i",{className:"uil uil-calendar-check font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Pending Bookings"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.pendingBookings})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-warning bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-warning",children:e.jsx("i",{className:"uil uil-clock font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Total Revenue"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsxs("span",{children:["$",n.totalRevenue.toLocaleString()]})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-info bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-info",children:e.jsx("i",{className:"uil uil-dollar-sign font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Total Technicians"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.totalTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-purple bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-purple",children:e.jsx("i",{className:"uil uil-users-alt font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Approved"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{className:"text-success",children:n.approvedTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-success bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-success",children:e.jsx("i",{className:"uil uil-check-circle font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Pending Approval"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{className:"text-warning",children:n.pendingTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-warning bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-warning",children:e.jsx("i",{className:"uil uil-hourglass font-18"})})})})]})})})}),e.jsx(l,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Rejected"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{className:"text-danger",children:n.rejectedTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-danger bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-danger",children:e.jsx("i",{className:"uil uil-times-circle font-18"})})})})]})})})})]})},z=()=>{const{data:t,isLoading:d}=T({pageSize:1e3}),i=(t==null?void 0:t.items)||[],o=k.useMemo(()=>{const n=new Date,x=[],j=[];for(let r=6;r>=0;r--){const c=new Date(n);c.setDate(c.getDate()-r),x.push(c.toLocaleDateString("en-US",{weekday:"short"}));const N=new Date(c.getFullYear(),c.getMonth(),c.getDate()),g=new Date(N);g.setDate(g.getDate()+1);const v=i.filter(u=>{if(!u.createdAt)return!1;const D=new Date(u.createdAt);return D>=N&&D<g}).length;j.push(v)}return{categories:x,data:j}},[i]),m={chart:{height:364,type:"line",dropShadow:{enabled:!0,opacity:.1,blur:7,left:-7,top:7},toolbar:{show:!1},zoom:{enabled:!1},parentHeightOffset:0},grid:{padding:{left:0,right:0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:4},legend:{show:!1},colors:["#727cf5"],xaxis:{categories:o.categories,tooltip:{enabled:!1},axisBorder:{show:!1}},yaxis:{labels:{formatter:function(n){return Math.round(n).toString()}}}},h=[{name:"Bookings",data:o.data}];return d?e.jsx(s,{children:e.jsxs(s.Body,{children:[e.jsx(y,{title:"Bookings Trend",menuItems:[],containerClass:""}),e.jsx("div",{className:"text-center py-5",children:e.jsx("p",{className:"text-muted",children:"Loading chart data..."})})]})}):e.jsx(s,{children:e.jsxs(s.Body,{children:[e.jsx(y,{containerClass:"d-flex align-items-center justify-content-between mb-2",title:"Bookings Trend",menuItems:[{label:"View All Bookings"},{label:"Export Report"}]}),e.jsx("div",{className:"chart-content-bg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted mb-0 mt-3",children:"Last 7 Days"}),e.jsx("h2",{className:"fw-normal mb-3",children:e.jsx("span",{children:o.data.reduce((n,x)=>n+x,0)})})]})}),e.jsx(S,{options:m,series:h,type:"line",className:"apex-charts mt-3",height:378})]})})},G=()=>{const{data:t=[],isLoading:d}=A({}),i=k.useMemo(()=>{const h=new Date,n=[],x=[];for(let j=11;j>=0;j--){const r=new Date(h.getFullYear(),h.getMonth()-j,1);n.push(r.toLocaleDateString("en-US",{month:"short"}));const c=new Date(r.getFullYear(),r.getMonth(),1),N=new Date(r.getFullYear(),r.getMonth()+1,1),g=t.filter(v=>{if(!v.createdAt)return!1;const u=new Date(v.createdAt);return u>=c&&u<N}).length;x.push(g)}return{categories:n,data:x}},[t]),o={chart:{height:260,type:"bar",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"20%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},legend:{show:!1},colors:["#727cf5"],xaxis:{categories:i.categories,axisBorder:{show:!1}},yaxis:{labels:{formatter:function(h){return Math.round(h).toString()}}},fill:{opacity:1},tooltip:{y:{formatter:function(h){return h.toString()}}}},m=[{name:"New Technicians",data:i.data}];return d?e.jsx(s,{className:"card-h-100",children:e.jsxs(s.Body,{children:[e.jsx(y,{title:"Technician Growth",menuItems:[],containerClass:""}),e.jsx("div",{className:"text-center py-5",children:e.jsx("p",{className:"text-muted",children:"Loading chart data..."})})]})}):e.jsx(s,{className:"card-h-100",children:e.jsxs(s.Body,{children:[e.jsx(y,{containerClass:"d-flex align-items-center justify-content-between mb-2",title:"Technician Growth",menuItems:[{label:"View All Technicians"},{label:"Export Report"}]}),e.jsx("div",{dir:"ltr",children:e.jsx(S,{options:o,series:m,type:"bar",className:"apex-charts",height:255})})]})})},H=()=>e.jsx(s,{children:e.jsx(s.Body,{children:e.jsx(y,{containerClass:"d-flex align-items-center justify-content-between",title:"Revenue By Location",menuItems:[{label:"Sales Report"},{label:"Export Report"},{label:"Profit"},{label:"Action"}]})})}),O=()=>e.jsxs(s,{children:[e.jsx(s.Body,{className:"pb-0",children:e.jsx(y,{containerClass:"d-flex align-items-center justify-content-between mb-2",title:"Recent Activity",menuItems:[{label:"Sales Report"},{label:"Export Report"},{label:"Profit"},{label:"Action"}]})}),e.jsx(I,{style:{maxHeight:"412px",width:"100%"},children:e.jsx(s.Body,{className:"py-0",children:e.jsxs(F,{children:[e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-upload bg-info-lighten text-info timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-info fw-bold mb-1 d-block",children:"You sold an item"}),e.jsx("small",{children:"Paul Burgess just purchased “Hyper - Admin Dashboard”!"}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"5 minutes ago"})})]})]}),e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-airplane bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Product on the Bootstrap Market"}),e.jsxs("small",{children:["Dave Gamache added",e.jsx("span",{className:"fw-bold",children:"Admin Dashboard"})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"30 minutes ago"})})]})]}),e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-microphone bg-info-lighten text-info timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-info fw-bold mb-1 d-block",children:"Robert Delaney"}),e.jsxs("small",{children:["Send you message",e.jsx("span",{className:"fw-bold",children:'"Are you there?"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"2 hours ago"})})]})]}),e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-upload bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Audrey Tobey"}),e.jsxs("small",{children:["Uploaded a photo ",e.jsx("span",{className:"fw-bold",children:'"Error.jpg"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"14 hours ago"})})]})]}),e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-airplane bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Product on the Bootstrap Market"}),e.jsxs("small",{children:["Dave Gamache added",e.jsx("span",{className:"fw-bold",children:"Admin Dashboard"})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"30 minutes ago"})})]})]}),e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-microphone bg-info-lighten text-info timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-info fw-bold mb-1 d-block",children:"Robert Delaney"}),e.jsxs("small",{children:["Send you message",e.jsx("span",{className:"fw-bold",children:'"Are you there?"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"2 hours ago"})})]})]}),e.jsxs(b,{children:[e.jsx("i",{className:"mdi mdi-upload bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(p,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Audrey Tobey"}),e.jsxs("small",{children:["Uploaded a photo ",e.jsx("span",{className:"fw-bold",children:'"Error.jpg"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"14 hours ago"})})]})]})]})})})]}),re=()=>{const[t,d]=k.useState(new Date);return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx(l,{xs:12,children:e.jsxs("div",{className:"page-title-box",children:[e.jsx("div",{className:"page-title-right",children:e.jsxs("form",{className:"d-flex",children:[e.jsx("div",{className:"input-group",children:e.jsx(E,{value:t,inputClass:"form-control-light",onChange:i=>{d(i)}})}),e.jsx(p,{to:"",className:"btn btn-primary ms-2",children:e.jsx("i",{className:"mdi mdi-autorenew"})}),e.jsx(p,{to:"",className:"btn btn-primary ms-1",children:e.jsx("i",{className:"mdi mdi-filter-variant"})})]})}),e.jsx("h4",{className:"page-title",children:"Dashboard"})]})})}),e.jsx(w,{children:e.jsx(l,{xs:12,children:e.jsx(Y,{})})}),e.jsxs(w,{children:[e.jsx(l,{lg:8,children:e.jsx(z,{})}),e.jsx(l,{lg:4,children:e.jsx(G,{})})]}),e.jsxs(w,{children:[e.jsx(l,{lg:4,children:e.jsx(H,{})}),e.jsx(l,{lg:8,children:e.jsx(O,{})})]})]})};export{re as default};
