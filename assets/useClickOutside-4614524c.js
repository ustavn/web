import{r as a,aR as O,af as E,ag as g,aP as R,aQ as i}from"./index-580402c3.js";const M=()=>{};function K(e){return e.button===0}function I(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const l=e=>e&&("current"in e?e.current:e),b={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function x(e,k=M,{disabled:d,clickTrigger:r="click"}={}){const f=a.useRef(!1),u=a.useRef(!1),m=a.useCallback(t=>{const n=l(e);O(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),f.current=!n||I(t)||!K(t)||!!E(n,t.target)||u.current,u.current=!1},[e]),p=g(t=>{const n=l(e);n&&E(n,t.target)?u.current=!0:u.current=!1}),v=g(t=>{f.current||k(t)});a.useEffect(()=>{var t,n;if(d||e==null)return;const o=R(l(e)),w=o.defaultView||window;let h=(t=w.event)!=null?t:(n=w.parent)==null?void 0:n.event,c=null;b[r]&&(c=i(o,b[r],p,!0));const y=i(o,r,m,!0),L=i(o,r,s=>{if(s===h){h=void 0;return}v(s)});let C=[];return"ontouchstart"in o.documentElement&&(C=[].slice.call(o.body.children).map(s=>i(s,"mousemove",M))),()=>{c==null||c(),y(),L(),C.forEach(s=>s())}},[e,d,r,m,p,v])}export{l as g,x as u};
