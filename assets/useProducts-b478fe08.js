import{u as i}from"./useQuery-57e6701b.js";import{a3 as n,a4 as c,a5 as d,ab as o}from"./index-765b91f2.js";import{u as s}from"./useMutation-428f7e03.js";import{u as p}from"./documentClient-3aa58490.js";async function y(e={}){const t=await n.get("/products/",{params:e});return d(t)}async function l(e){const t=await n.post("/products/",e);return c(t)}async function m(e){const t=await n.get(`/products/${e}`);return c(t)}async function f(e){await n.post("/products/add-reference",e)}async function q(e){await n.post("/products/remove-reference",e)}async function P(e){const{id:t,...u}=e,a=await n.put(`/products/${t}`,u);return c(a)}async function v(e){const t=e.images.map(r=>p(r)),a=(await Promise.all(t)).map(r=>r.url).filter(r=>r!=null);if(a.length>0)try{await n.put(`/products/${e.productId}`,{imageUrls:a})}catch(r){console.warn("Failed to update product with image URLs:",r)}return{imageUrls:a}}async function Q(e,t){await n.delete(`/products/${e}/images`,{data:{imageUrl:t}})}function C(e={}){return i({queryKey:["products",e],queryFn:()=>y(e),staleTime:3e4,retry:2,select:t=>t||[]})}function F(e){return i({queryKey:["product",e],queryFn:()=>m(e),enabled:!!e,staleTime:3e4})}function R(){const e=o();return s({mutationFn:t=>l(t),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}function D(){const e=o();return s({mutationFn:t=>f(t),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["product"]})}})}function S(){const e=o();return s({mutationFn:t=>q(t),onSuccess:(t,u)=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["product"]}),e.invalidateQueries({queryKey:["product",u.productId]}),e.invalidateQueries({queryKey:["product",u.productReferenceId]})}})}function U(){const e=o();return s({mutationFn:t=>P(t),onSuccess:t=>{e.invalidateQueries({queryKey:["products"]}),e.setQueryData(["product",t.id],t)}})}function $(){const e=o();return s({mutationFn:t=>v(t),onSuccess:(t,u)=>{e.invalidateQueries({queryKey:["product",u.productId]}),e.invalidateQueries({queryKey:["products"]})}})}function h(){const e=o();return s({mutationFn:({productId:t,imageUrl:u})=>Q(t,u),onSuccess:(t,u)=>{e.invalidateQueries({queryKey:["product",u.productId]}),e.invalidateQueries({queryKey:["products"]})}})}export{R as a,D as b,$ as c,F as d,h as e,U as f,S as g,C as u};
