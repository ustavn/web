import{u as a}from"./useQuery-6c10f0fe.js";import{a5 as o,a6 as n}from"./index-f2719a80.js";import{u}from"./useMutation-2bc86ccc.js";const c="https://api.dev.usta.vn",r=o.create({baseURL:`${c}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(async e=>{const t=localStorage.getItem("_USTA_OAUTH");if(t)try{const s=JSON.parse(t);e.headers.Authorization=`Bearer ${s.accessToken}`}catch{}return e},e=>Promise.reject(e));r.interceptors.response.use(e=>e,e=>Promise.reject(e));async function i(e={}){const t=await r.get("/products/");if(t.data.success)return t.data.data;throw new Error(t.data.error||"Failed to fetch products")}async function d(e){const t=await r.post("/products/",e);if(t.data.success)return t.data.data;throw new Error(t.data.error||"Failed to create product")}function l(e={}){return a({queryKey:["products",e],queryFn:()=>i(e),staleTime:3e4,retry:2,select:t=>t||[]})}function f(){const e=n();return u({mutationFn:t=>d(t),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}export{f as a,l as u};
