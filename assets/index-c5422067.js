import{j as e,aW as N,r as j,P as S,d as p,f as i,h as C,bn as L,v as t}from"./index-038953f0.js";import{u as P,a as D}from"./useProducts-3b3f389d.js";import{u as H}from"./useCategories-191a1eda.js";import{B as u}from"./Button-3bfbac80.js";import{A as w}from"./Alert-bc52e707.js";import{S as F}from"./Spinner-e48ef451.js";import{M as c}from"./Modal-7d1d46c4.js";import"./useQuery-7bedfd01.js";import"./useMutation-b744f206.js";const I=[{Header:"ID",accessor:"id",defaultCanSort:!1,Cell:({value:a})=>e.jsxs("small",{className:"text-muted",children:[a.substring(0,8),"..."]})},{Header:"Name",accessor:"name",defaultCanSort:!0,Cell:({value:a})=>e.jsx("strong",{children:a})},{Header:"Price",accessor:"price",defaultCanSort:!0,Cell:({value:a})=>`$${a.toFixed(2)}`},{Header:"Duration",accessor:"duration",defaultCanSort:!0,Cell:({value:a})=>`${a} days`},{Header:"Category ID",accessor:"categoryId",defaultCanSort:!1,Cell:({value:a})=>e.jsxs("small",{className:"text-muted",children:[a.substring(0,8),"..."]})},{Header:"Level Code",accessor:"categoryLevelCode",defaultCanSort:!1,Cell:({value:a})=>e.jsx(N,{bg:"info",children:a})},{Header:"Description",accessor:"description",defaultCanSort:!1,Cell:({value:a})=>e.jsx("span",{className:"text-muted",children:a})},{Header:"Created At",accessor:"createdAt",defaultCanSort:!0,Cell:({value:a})=>new Date(a).toLocaleDateString()}],A=[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50}],B=()=>{const[a,n]=j.useState(!1),[s,o]=j.useState({categoryId:"",categoryLevelCode:"",name:"",price:0,duration:0,description:""}),{data:m,isLoading:g,error:x}=P(),{data:l,isLoading:v}=H(),h=D(),f=r=>{const d=l==null?void 0:l.find(b=>b.id===r);d&&o({...s,categoryId:d.id,categoryLevelCode:d.levelCode})},y=async r=>{r.preventDefault();try{await h.mutateAsync(s),n(!1),o({categoryId:"",categoryLevelCode:"",name:"",price:0,duration:0,description:""})}catch(d){console.error("Failed to create product:",d)}};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Products",subName:"Apps"}),e.jsx(p,{children:e.jsx(i,{xs:12,children:e.jsx(C,{children:e.jsxs(C.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{className:"header-title",children:"Products List"}),e.jsxs(u,{variant:"primary",onClick:()=>n(!0),children:[e.jsx("i",{className:"mdi mdi-plus-circle me-1"}),"Create Product"]})]}),x&&e.jsxs(w,{variant:"danger",children:[e.jsx("strong",{children:"Error:"})," ",x instanceof Error?x.message:"Failed to load products"]}),g?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(F,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading products..."})]}):m&&m.length>0?e.jsx(L,{columns:I,data:m,pageSize:10,sizePerPageList:A,isSortable:!0,pagination:!0,isSearchable:!0}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("p",{className:"text-muted",children:"No products found"}),e.jsx(u,{variant:"primary",onClick:()=>n(!0),children:"Create First Product"})]})]})})})}),e.jsxs(c,{show:a,onHide:()=>n(!1),size:"lg",children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{children:"Create New Product"})}),e.jsxs(t,{onSubmit:y,children:[e.jsxs(c.Body,{children:[e.jsxs(p,{children:[e.jsx(i,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Product Name *"}),e.jsx(t.Control,{type:"text",placeholder:"Enter product name",value:s.name,onChange:r=>o({...s,name:r.target.value}),required:!0})]})}),e.jsx(i,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Category *"}),e.jsxs(t.Select,{value:s.categoryId,onChange:r=>f(r.target.value),required:!0,disabled:v,children:[e.jsx("option",{value:"",children:"Select a category"}),l==null?void 0:l.map(r=>e.jsxs("option",{value:r.id,children:[r.levelCode," - ",r.name]},r.id))]}),s.categoryLevelCode&&e.jsxs(t.Text,{className:"text-muted",children:["Level Code: ",e.jsx("strong",{children:s.categoryLevelCode})]})]})})]}),e.jsxs(p,{children:[e.jsx(i,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Price *"}),e.jsx(t.Control,{type:"number",step:"0.01",placeholder:"0.00",value:s.price,onChange:r=>o({...s,price:parseFloat(r.target.value)}),required:!0})]})}),e.jsx(i,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Duration (mins) *"}),e.jsx(t.Control,{type:"number",placeholder:"30",value:s.duration,onChange:r=>o({...s,duration:parseInt(r.target.value)}),required:!0})]})})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Description *"}),e.jsx(t.Control,{as:"textarea",rows:3,placeholder:"Enter product description",value:s.description,onChange:r=>o({...s,description:r.target.value}),required:!0})]})]}),e.jsxs(c.Footer,{children:[e.jsx(u,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(u,{variant:"primary",type:"submit",disabled:h.isPending,children:h.isPending?"Creating...":"Create Product"})]})]})]})]})},W=()=>e.jsx(B,{});export{W as default};
