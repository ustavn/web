import{u as n}from"./useQuery-6c10f0fe.js";import{a5 as r,a6 as i}from"./index-f2719a80.js";import{u}from"./useMutation-2bc86ccc.js";const c="https://api.dev.usta.vn",o=r.create({baseURL:`${c}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{const t=localStorage.getItem("_USTA_OAUTH");if(t)try{const s=JSON.parse(t);e.headers.Authorization=`Bearer ${s.accessToken}`}catch{}return e},e=>Promise.reject(e));o.interceptors.response.use(e=>e,e=>Promise.reject(e));async function d(e={}){const{page:t=1,pageSize:s=10}=e,a=await o.get("/bookings",{params:{page:t,pageSize:s}});return a.data.success&&a.data.data?{items:a.data.data.items||[],total:a.data.data.totalCount||0,page:a.data.data.page||t,pageSize:a.data.data.pageSize||s,totalPages:a.data.data.totalPages||1}:a.data}async function p(e){return(await o.post("/bookings/",e)).data}async function g(e){try{const t=await o.get(`/bookings/${e}`);if(t.data&&typeof t.data=="object"&&"success"in t.data){const a=t.data;if(a.success&&a.data)return a.data}return t.data}catch(t){throw t}}function f(e={}){return n({queryKey:["bookings",e],queryFn:()=>d(e),staleTime:3e4,retry:2})}function b(e){return n({queryKey:["booking",e],queryFn:()=>g(e),enabled:!!e&&e.length>0,staleTime:3e4,retry:2})}function h(){const e=i();return u({mutationFn:t=>p(t),onSuccess:()=>{e.invalidateQueries({queryKey:["bookings"]})}})}export{h as a,b,f as u};
