import{r as p,z,j as e,l as F,Q as oe,S as te,o as se,U as le,a as ae,P as ne,d as I,f as b,h as O,_ as ce,R as re,c as $}from"./index-7abc2e1c.js";import{F as i}from"./Form-3dd09149.js";import{u as U}from"./useQuery-fef0428f.js";import{u as ie}from"./useMutation-04d1b243.js";import{u as de}from"./useProducts-4c9cc6dd.js";import{u as ge}from"./hook-87ee9a06.js";import{u as ue,B as me}from"./Nav-d0d45958.js";import{N as pe}from"./NavbarContext-c9a65507.js";import{m as he}from"./NavContext-cbce7ab2.js";import{B as j}from"./Badge-f7a378fe.js";import{B as xe}from"./ButtonGroup-9fb69fa0.js";import{B as C}from"./Button-98115848.js";import{A as T}from"./Alert-970a7765.js";import{S as M}from"./Spinner-f490c646.js";import{M as E}from"./Modal-d1b37a71.js";const K=p.forwardRef(({className:o,bsPrefix:s,as:a="div",...d},n)=>(s=z(s,"nav-item"),e.jsx(a,{ref:n,className:F(o,s),...d})));K.displayName="NavItem";const Pe=K,Q=p.forwardRef(({bsPrefix:o,className:s,as:a=oe,active:d,eventKey:n,disabled:h=!1,...y},G)=>{o=z(o,"nav-link");const[A,x]=ue({key:he(n,y.href),active:d,disabled:h,...y});return e.jsx(a,{...y,...A,ref:G,disabled:h,className:F(s,o,h&&"disabled",x.isActive&&"active")})});Q.displayName="NavLink";const fe=Q,H=p.forwardRef((o,s)=>{const{as:a="div",bsPrefix:d,variant:n,fill:h=!1,justify:y=!1,navbar:G,navbarScroll:A,className:x,activeKey:r,...m}=ge(o,{activeKey:"onSelect"}),g=z(d,"nav");let P,u,l=!1;const c=p.useContext(pe),f=p.useContext(te);return c?(P=c.bsPrefix,l=G??!0):f&&({cardHeaderBsPrefix:u}=f),e.jsx(me,{as:a,ref:s,activeKey:r,className:F(x,{[g]:!l,[`${P}-nav`]:l,[`${P}-nav-scroll`]:l&&A,[`${u}-${n}`]:!!u,[`${g}-${n}`]:!!n,[`${g}-fill`]:h,[`${g}-justified`]:y}),...m})});H.displayName="Nav";const v=Object.assign(H,{Item:Pe,Link:fe});let _=!1,N=!1;const k=[],Ae=({onPlaceSelected:o,value:s="",placeholder:a="Search for an address",required:d=!1})=>{const n=p.useRef(null),h=p.useRef(null),[y,G]=p.useState(!1);return p.useEffect(()=>{n.current&&s&&(n.current.value=s,console.log("[GooglePlacesAutocomplete] ğŸ”„ Updated input value from prop:",s))},[s]),p.useEffect(()=>{console.log("[GooglePlacesAutocomplete] ğŸš€ Component mounted, starting initialization..."),console.log("[GooglePlacesAutocomplete] ğŸ“‹ All env variables:",{VITE_IDENTITY_SERVER:"https://identity.dev.usta.vn",VITE_CLIENT_ID:"admin_client",VITE_SCOPES:"offline_access",VITE_REDIRECT_URI:"https://dev.usta.vn",VITE_API_SERVER:"https://api.dev.usta.vn",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyB5490SkKLDlee3fYtZj6dMOXZdy_NNZ3k",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1});const A="AIzaSyB5490SkKLDlee3fYtZj6dMOXZdy_NNZ3k";console.log("[GooglePlacesAutocomplete] ğŸ”‘ API Key found:",A.substring(0,10)+"..."),console.log("[GooglePlacesAutocomplete] ğŸ”‘ Full API Key:",A);const x=()=>{var m,g,P;if(console.log("[GooglePlacesAutocomplete] ğŸ¯ initAutocomplete called"),console.log("[GooglePlacesAutocomplete] ğŸ” Checking input ref...",n.current),!n.current){console.warn("[GooglePlacesAutocomplete] âš ï¸ Input ref not available, retrying in 100ms..."),setTimeout(x,100);return}if(console.log("[GooglePlacesAutocomplete] âœ… Input ref found:",n.current),console.log("[GooglePlacesAutocomplete] ğŸ” Checking window.google...",typeof window.google),console.log("[GooglePlacesAutocomplete] ğŸ” Checking google.maps...",typeof((m=window.google)==null?void 0:m.maps)),console.log("[GooglePlacesAutocomplete] ğŸ” Checking google.maps.places...",typeof((P=(g=window.google)==null?void 0:g.maps)==null?void 0:P.places)),!window.google||!window.google.maps||!window.google.maps.places){console.error("[GooglePlacesAutocomplete] âŒ Google Maps not fully loaded yet"),console.log("[GooglePlacesAutocomplete] ğŸ”„ Retrying in 200ms..."),setTimeout(x,200);return}console.log("[GooglePlacesAutocomplete] ğŸ¯ Creating Autocomplete instance...");try{h.current&&(console.log("[GooglePlacesAutocomplete] ğŸ§¹ Clearing existing autocomplete"),google.maps.event.clearInstanceListeners(h.current));const u={types:["geocode","establishment"],componentRestrictions:{country:"vn"},fields:["formatted_address","geometry","name"]};console.log("[GooglePlacesAutocomplete] ğŸ”§ Autocomplete options:",u),h.current=new google.maps.places.Autocomplete(n.current,u),console.log("[GooglePlacesAutocomplete] âœ… Autocomplete instance created:",h.current),console.log("[GooglePlacesAutocomplete] ğŸ” Input element classes:",n.current.className),console.log("[GooglePlacesAutocomplete] ğŸ” Input element after autocomplete:",n.current),console.warn("[GooglePlacesAutocomplete] ğŸš¨ IMPORTANT: Check browser console for Google Maps API errors!"),console.warn('[GooglePlacesAutocomplete] ğŸš¨ Look for messages like "Google Maps JavaScript API error" or "ApiNotActivatedMapError"'),console.warn("[GooglePlacesAutocomplete] ğŸš¨ Common issues:"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   1. Places API not enabled in Google Cloud Console"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   2. Billing not enabled"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   3. API key has restrictions (HTTP referrer, IP)"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   4. Quota exceeded"),setTimeout(()=>{const l=document.querySelector(".pac-container");console.log("[GooglePlacesAutocomplete] ğŸ” PAC container exists:",!!l),console.log("[GooglePlacesAutocomplete] ğŸ” PAC container:",l),l&&(console.log("[GooglePlacesAutocomplete] ğŸ” PAC container styles:",window.getComputedStyle(l)),console.log("[GooglePlacesAutocomplete] ğŸ” PAC container z-index:",window.getComputedStyle(l).zIndex))},1e3),n.current.addEventListener("keydown",l=>{console.log("[GooglePlacesAutocomplete] âŒ¨ï¸ Keydown event:",l.key),setTimeout(()=>{const c=document.querySelectorAll(".pac-item");if(console.log("[GooglePlacesAutocomplete] ğŸ“‹ PAC items found:",c.length),c.length>0)console.log("[GooglePlacesAutocomplete] âœ… Suggestions are showing!");else{console.log("[GooglePlacesAutocomplete] âŒ No suggestions visible");const f=document.querySelector(".pac-container");f&&(console.log("[GooglePlacesAutocomplete] ğŸ“¦ PAC Container display:",window.getComputedStyle(f).display),console.log("[GooglePlacesAutocomplete] ğŸ“¦ PAC Container visibility:",window.getComputedStyle(f).visibility))}},500)}),console.log("[GooglePlacesAutocomplete] ğŸ§ Adding place_changed listener..."),h.current.addListener("place_changed",()=>{var f;console.log("[GooglePlacesAutocomplete] ğŸ‰ place_changed event fired!");const l=(f=h.current)==null?void 0:f.getPlace();if(console.log("[GooglePlacesAutocomplete] ğŸ“ Place data received:",l),console.log("[GooglePlacesAutocomplete] ğŸ“ Place.geometry:",l==null?void 0:l.geometry),console.log("[GooglePlacesAutocomplete] ğŸ“ Place.formatted_address:",l==null?void 0:l.formatted_address),!l||!l.geometry||!l.geometry.location){console.error("[GooglePlacesAutocomplete] âŒ No place details available"),console.error("[GooglePlacesAutocomplete] Place object:",l);return}const c={address:l.formatted_address||"",latitude:l.geometry.location.lat(),longitude:l.geometry.location.lng()};console.log("[GooglePlacesAutocomplete] âœ… Setting result:",c),n.current&&(n.current.value=c.address),console.log("[GooglePlacesAutocomplete] ğŸ“ Calling onPlaceSelected..."),o(c),console.log("[GooglePlacesAutocomplete] âœ… onPlaceSelected called successfully")}),console.log("[GooglePlacesAutocomplete] âœ… Listener added successfully"),G(!0),console.log("[GooglePlacesAutocomplete] âœ…âœ…âœ… Autocomplete initialized successfully! Ready to use.")}catch(u){console.error("[GooglePlacesAutocomplete] âŒ Error initializing autocomplete:",u),console.error("[GooglePlacesAutocomplete] Error stack:",u)}},r=()=>{if(console.log("[GooglePlacesAutocomplete] ğŸ”„ loadGoogleMaps called"),console.log("[GooglePlacesAutocomplete] ğŸ“Š State - googleMapsLoaded:",_),console.log("[GooglePlacesAutocomplete] ğŸ“Š State - googleMapsLoading:",N),console.log("[GooglePlacesAutocomplete] ğŸŒ window.google exists:",typeof window.google<"u"),_||window.google&&window.google.maps&&window.google.maps.places){console.log("[GooglePlacesAutocomplete] âœ… Google Maps already loaded, initializing now..."),_=!0,x();return}if(N){console.log("[GooglePlacesAutocomplete] â³ Google Maps is currently loading, adding callback to queue..."),console.log("[GooglePlacesAutocomplete] ğŸ“Š Current callback queue size:",k.length),k.push(x);return}const m=document.querySelector('script[src*="maps.googleapis.com"]');if(console.log("[GooglePlacesAutocomplete] ğŸ” Checking for existing script:",m),m){console.log("[GooglePlacesAutocomplete] â³ Found existing script, attaching load listener..."),console.log("[GooglePlacesAutocomplete] Script src:",m.getAttribute("src")),N=!0,m.addEventListener("load",()=>{console.log("[GooglePlacesAutocomplete] âœ… Existing script loaded successfully"),_=!0,N=!1,x(),console.log("[GooglePlacesAutocomplete] ğŸ”„ Processing",k.length,"queued callbacks"),k.forEach(u=>u()),k.length=0});return}console.log("[GooglePlacesAutocomplete] ğŸ“¥ No existing script found, creating new one...");const g=`https://maps.googleapis.com/maps/api/js?key=${A}&libraries=places`;console.log("[GooglePlacesAutocomplete] ğŸ”— Script URL:",g),N=!0;const P=document.createElement("script");P.src=g,P.async=!0,P.defer=!0,P.onload=()=>{var u,l,c;if(console.log("[GooglePlacesAutocomplete] âœ…âœ… Google Maps script loaded successfully!"),console.log("[GooglePlacesAutocomplete] ğŸ” Verifying window.google:",typeof window.google),console.log("[GooglePlacesAutocomplete] ğŸ” Verifying google.maps:",typeof((u=window.google)==null?void 0:u.maps)),console.log("[GooglePlacesAutocomplete] ğŸ” Verifying google.maps.places:",typeof((c=(l=window.google)==null?void 0:l.maps)==null?void 0:c.places)),window.google&&window.google.maps){const f=window.google.maps;console.log("[GooglePlacesAutocomplete] ğŸ” Google Maps object:",f),f.__gjsload__&&console.log("[GooglePlacesAutocomplete] âš ï¸ Maps loaded but check console for API key errors")}_=!0,N=!1,x(),console.log("[GooglePlacesAutocomplete] ğŸ”„ Processing",k.length,"queued callbacks"),k.forEach(f=>f()),k.length=0},P.onerror=u=>{console.error("[GooglePlacesAutocomplete] âŒâŒ Failed to load Google Maps script!"),console.error("[GooglePlacesAutocomplete] Error:",u),console.error("[GooglePlacesAutocomplete] Script URL was:",g),N=!1},console.log("[GooglePlacesAutocomplete] ğŸ“Œ Appending script to document.head..."),document.head.appendChild(P),console.log("[GooglePlacesAutocomplete] âœ… Script tag added to DOM")};return console.log("[GooglePlacesAutocomplete] ğŸš€ Starting loadGoogleMaps..."),r(),console.log("[GooglePlacesAutocomplete] âœ… loadGoogleMaps initiated"),()=>{if(console.log("[GooglePlacesAutocomplete] ğŸ§¹ Component unmounting, cleaning up..."),h.current&&window.google&&window.google.maps)try{google.maps.event.clearInstanceListeners(h.current),console.log("[GooglePlacesAutocomplete] âœ… Cleanup completed")}catch(m){console.log("[GooglePlacesAutocomplete] âš ï¸ Cleanup error (safe to ignore):",m)}}},[o]),console.log("[GooglePlacesAutocomplete] ğŸ¨ Rendering component, isReady:",y),e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
				.pac-container {
					z-index: 9999 !important;
					position: fixed !important;
				}
			`}),e.jsx("div",{style:{position:"relative"},children:e.jsx(i.Control,{ref:n,type:"text",defaultValue:s,onFocus:()=>{console.log("[GooglePlacesAutocomplete] ğŸ¯ Input focused"),setTimeout(()=>{const A=document.querySelector(".pac-container");console.log("[GooglePlacesAutocomplete] ğŸ” After focus - PAC container:",A)},100)},onBlur:()=>console.log("[GooglePlacesAutocomplete] ğŸ‘‹ Input blurred"),onInput:A=>{const x=A.target.value;console.log("[GooglePlacesAutocomplete] âŒ¨ï¸ User typing:",x),setTimeout(()=>{const r=document.querySelector(".pac-container"),m=document.querySelectorAll(".pac-item");if(console.log("[GooglePlacesAutocomplete] ğŸ“Š After input - PAC container:",r),console.log("[GooglePlacesAutocomplete] ğŸ“Š After input - PAC items count:",m.length),r){const g=window.getComputedStyle(r);console.log("[GooglePlacesAutocomplete] ğŸ“Š PAC display:",g.display),console.log("[GooglePlacesAutocomplete] ğŸ“Š PAC visibility:",g.visibility),console.log("[GooglePlacesAutocomplete] ğŸ“Š PAC z-index:",g.zIndex)}},300)},placeholder:a,required:d,autoComplete:"off",id:"google-places-autocomplete-input"})})]})},Z="https://api.dev.usta.vn",L=se.create({baseURL:`${Z}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});L.interceptors.request.use(async o=>{const s=localStorage.getItem("_USTA_OAUTH");if(s)try{const a=JSON.parse(s);o.headers.Authorization=`Bearer ${a.accessToken}`,console.log("[Booking API] Request:",{method:o.method,url:o.url,params:o.params,data:o.data,hasAuth:!!o.headers.Authorization})}catch(a){console.error("[Booking API] Failed to parse OAuth session:",a)}else console.warn("[Booking API] No OAuth session found");return o},o=>(console.error("[Booking API] Request error:",o),Promise.reject(o)));L.interceptors.response.use(o=>(console.log("[Booking API] Response:",{status:o.status,url:o.config.url,data:o.data}),o),o=>{var s,a,d;return console.error("[Booking API] Response error:",{status:(s=o.response)==null?void 0:s.status,url:(a=o.config)==null?void 0:a.url,data:(d=o.response)==null?void 0:d.data,message:o.message}),Promise.reject(o)});async function je(o={}){const{page:s=1,pageSize:a=10}=o;console.log("[Booking API] Fetching bookings:",{page:s,pageSize:a});const d=await L.get("/bookings",{params:{page:s,pageSize:a}});return d.data.success&&d.data.data?{items:d.data.data.items||[],total:d.data.data.totalCount||0,page:d.data.data.page||s,pageSize:d.data.data.pageSize||a,totalPages:d.data.data.totalPages||1}:d.data}async function ye(o){console.log("[Booking API] Creating booking:",o);const s=await L.post("/bookings/",o);return console.log("[Booking API] Booking created successfully:",s.data),s.data}async function ve(o){var s;console.log("[Booking API] Fetching booking by ID:",o),console.log("[Booking API] Full URL will be:",`${Z}/api/bookings/${o}`);try{const a=await L.get(`/bookings/${o}`);if(console.log("[Booking API] Raw response:",a.data),a.data&&typeof a.data=="object"&&"success"in a.data){const n=a.data;if(n.success&&n.data)return console.log("[Booking API] Returning wrapped data:",n.data),n.data}return console.log("[Booking API] Treating as direct response"),a.data}catch(a){throw console.error("[Booking API] Error fetching booking:",a),console.error("[Booking API] Error response:",(s=a.response)==null?void 0:s.data),a}}function Ge(o={}){return U({queryKey:["bookings",o],queryFn:()=>je(o),staleTime:3e4,retry:2})}function $e(o){console.log("[useBooking] Hook called with id:",o);const s=U({queryKey:["booking",o],queryFn:()=>(console.log("[useBooking] Query function called, fetching booking:",o),ve(o)),enabled:!!o&&o.length>0,staleTime:3e4,retry:2});return console.log("[useBooking] Query state:",{isLoading:s.isLoading,isFetching:s.isFetching,isError:s.isError,enabled:!!o&&o.length>0,data:s.data}),s}function be(){const o=le();return ie({mutationFn:s=>ye(s),onSuccess:s=>{console.log("[useCreateBooking] Booking created successfully:",s),o.invalidateQueries({queryKey:["bookings"]})},onError:s=>{console.error("[useCreateBooking] Failed to create booking:",s)}})}const Ce=()=>{var V;const o=ae(),[s,a]=p.useState(1),[d]=p.useState(10),[n,h]=p.useState("new"),[y,G]=p.useState(""),[A,x]=p.useState(!1),[r,m]=p.useState({bookingTime:"",customerId:"",customerName:"",customerPhone:"",latitude:0,longitude:0,address:"",items:[]}),[g,P]=p.useState(""),[u,l]=p.useState(1),{data:c,isLoading:f,error:D,refetch:Y}=Ge({page:s,pageSize:d}),S=be(),{data:q=[],isLoading:J}=de(),B={new:(c==null?void 0:c.total)||0,verification:0,approval:0,processed:0},X=async t=>{if(t.preventDefault(),!g){alert("Please select a product");return}try{const w={...r,bookingTime:new Date(r.bookingTime).toISOString(),items:[{productId:g,quantity:u}]};await S.mutateAsync(w),x(!1),m({bookingTime:"",customerId:"",customerName:"",customerPhone:"",latitude:0,longitude:0,address:"",items:[]}),P(""),l(1)}catch(w){console.error("Failed to create booking:",w)}},W=t=>{m(w=>({...w,address:t.address,latitude:t.latitude,longitude:t.longitude}))},R=(t=>q.find(w=>w.id===t))(g),ee=(c==null?void 0:c.items)||[];return e.jsxs(e.Fragment,{children:[e.jsx(ne,{title:"Booking Management",subName:"Apps"}),e.jsx(I,{children:e.jsx(b,{xs:12,children:e.jsx(O,{children:e.jsxs(O.Body,{children:[e.jsxs(v,{variant:"tabs",className:"nav-bordered mb-4",children:[e.jsx(v.Item,{children:e.jsxs(v.Link,{active:n==="new",onClick:()=>h("new"),className:"d-flex align-items-center gap-2",children:["New",B.new>0&&e.jsx(j,{bg:"danger",className:"ms-1",children:B.new})]})}),e.jsx(v.Item,{children:e.jsxs(v.Link,{active:n==="verification",onClick:()=>h("verification"),className:"d-flex align-items-center gap-2",children:["Verification Due",B.verification>0]})}),e.jsx(v.Item,{children:e.jsxs(v.Link,{active:n==="approval",onClick:()=>h("approval"),className:"d-flex align-items-center gap-2",children:["Approval Due",B.approval>0]})}),e.jsx(v.Item,{children:e.jsxs(v.Link,{active:n==="processed",onClick:()=>h("processed"),className:"d-flex align-items-center gap-2",children:["Processed",B.processed>0]})})]}),e.jsx(I,{className:"mb-4",children:e.jsx(b,{md:12,children:e.jsxs("div",{className:"position-relative",children:[e.jsx("i",{className:"mdi mdi-magnify position-absolute top-50 start-0 translate-middle-y ms-3 text-muted",style:{fontSize:"18px"}}),e.jsx(i.Control,{type:"text",placeholder:"Search bookings by customer name...",value:y,onChange:t=>G(t.target.value),className:"ps-5"})]})})}),e.jsx(I,{className:"mb-4",children:e.jsx(b,{xs:12,children:e.jsxs(xe,{className:"mb-2",children:[e.jsxs(C,{variant:"primary",size:"sm",onClick:()=>x(!0),children:[e.jsx("i",{className:"mdi mdi-plus me-1"}),"Create Booking"]}),e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>Y(),children:[e.jsx("i",{className:"mdi mdi-refresh me-1"}),"Reload"]})]})})}),D&&e.jsxs(T,{variant:"danger",children:[e.jsx("strong",{children:"Error:"})," ",D instanceof Error?D.message:"Failed to load bookings"]}),f?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(M,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading bookings..."})]}):c!=null&&c.items&&c.items.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-centered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Booking Time"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"})]})}),e.jsx("tbody",{children:ee.map(t=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>o(`/apps/booking/${t.id}`),children:[e.jsx("td",{children:e.jsx("strong",{children:t.customerName||"N/A"})}),e.jsx("td",{children:t.customerPhone||"-"}),e.jsx("td",{className:"text-muted",children:e.jsx("small",{children:t.address||"-"})}),e.jsx("td",{children:new Date(t.bookingTime).toLocaleString("vi-VN")}),e.jsx("td",{children:t.items&&t.items.length>0?e.jsxs(j,{bg:"info",children:[t.items.length," items"]}):t.totalPrice?e.jsxs(j,{bg:"secondary",children:[t.totalPrice.toLocaleString("vi-VN")," VND"]}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{children:typeof t.status=="number"?e.jsxs(e.Fragment,{children:[t.status===1&&e.jsx(j,{bg:"info",children:"Created"}),t.status===2&&e.jsx(j,{bg:"primary",children:"Assigned"}),t.status===3&&e.jsx(j,{bg:"warning",children:"In Progress"}),t.status===4&&e.jsx(j,{bg:"success",children:"Done"}),t.status===5&&e.jsx(j,{bg:"danger",children:"Failed"}),t.status===6&&e.jsx(j,{bg:"secondary",children:"Cancelled"}),[1,2,3,4,5,6].indexOf(t.status)===-1&&e.jsxs(j,{bg:"secondary",children:["Status ",t.status]})]}):e.jsx(j,{bg:"info",children:t.status||"Unknown"})}),e.jsx("td",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString("vi-VN"):"-"})]},t.id))})]})}),e.jsx(I,{className:"mt-4",children:e.jsx(b,{xs:12,children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted",children:["Showing ",c.items.length," of ",c.total," bookings"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",disabled:s===1,onClick:()=>a(s-1),children:"Previous"}),e.jsxs(C,{variant:"secondary",size:"sm",disabled:!0,children:["Page ",s," of ",c.totalPages]}),e.jsx(C,{variant:"secondary",size:"sm",disabled:s>=c.totalPages,onClick:()=>a(s+1),children:"Next"})]})]})})})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("p",{className:"text-muted",children:"No bookings found"}),e.jsx(C,{variant:"primary",onClick:()=>x(!0),children:"Create First Booking"})]})]})})})}),e.jsxs(E,{show:A,onHide:()=>x(!1),size:"lg",children:[e.jsx(E.Header,{closeButton:!0,children:e.jsx(E.Title,{children:"Create New Booking"})}),e.jsxs(i,{onSubmit:X,children:[e.jsxs(E.Body,{children:[S.isError&&e.jsxs(T,{variant:"danger",dismissible:!0,children:["Failed to create booking: ",((V=S.error)==null?void 0:V.message)||"Unknown error"]}),e.jsxs(I,{children:[e.jsx(b,{md:6,children:e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Customer Name *"}),e.jsx(i.Control,{type:"text",placeholder:"Enter customer name",value:r.customerName,onChange:t=>m({...r,customerName:t.target.value}),required:!0})]})}),e.jsx(b,{md:6,children:e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Customer Phone *"}),e.jsx(i.Control,{type:"tel",placeholder:"0352978519",value:r.customerPhone,onChange:t=>m({...r,customerPhone:t.target.value}),required:!0})]})})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Customer ID *"}),e.jsx(i.Control,{type:"text",placeholder:"Enter customer ID (UUID)",value:r.customerId,onChange:t=>m({...r,customerId:t.target.value}),required:!0})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Address *"}),e.jsx(Ae,{value:r.address,onPlaceSelected:W,placeholder:"Search for an address using Google Maps",required:!0})]}),r.latitude!==0&&r.longitude!==0&&e.jsx(T,{variant:"info",className:"mb-3",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Coordinates:"})," ",r.latitude.toFixed(6),", ",r.longitude.toFixed(6)]})}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Booking Time *"}),e.jsx(i.Control,{type:"datetime-local",value:r.bookingTime,onChange:t=>m({...r,bookingTime:t.target.value}),required:!0})]}),e.jsxs(I,{children:[e.jsx(b,{md:8,children:e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Select Product *"}),J?e.jsxs("div",{className:"text-center py-2",children:[e.jsx(M,{animation:"border",size:"sm"}),e.jsx("span",{className:"ms-2",children:"Loading products..."})]}):e.jsxs(i.Select,{value:g,onChange:t=>P(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Select a product --"}),q.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.price.toLocaleString("vi-VN")," VND"]},t.id))]})]})}),e.jsx(b,{md:4,children:e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Quantity *"}),e.jsx(i.Control,{type:"number",min:"1",value:u,onChange:t=>l(parseInt(t.target.value)||1),required:!0})]})})]}),R&&e.jsxs(T,{variant:"info",className:"mb-3",children:[e.jsx("strong",{children:"Selected:"})," ",R.name," x ",u,e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:R.description}),e.jsx("hr",{className:"my-2"}),e.jsxs("strong",{children:["Total: ",(R.price*u).toLocaleString("vi-VN")," VND"]})]})]}),e.jsxs(E.Footer,{children:[e.jsx(C,{variant:"secondary",onClick:()=>x(!1),disabled:S.isPending,children:"Cancel"}),e.jsx(C,{variant:"primary",type:"submit",disabled:S.isPending||!g||!r.address,children:S.isPending?e.jsxs(e.Fragment,{children:[e.jsx(M,{animation:"border",size:"sm",className:"me-2"}),"Creating..."]}):"Create Booking"})]})]})]})]})},ke=p.lazy(()=>ce(()=>import("./BookingDetail-054d4d17.js"),["assets/BookingDetail-054d4d17.js","assets/index-7abc2e1c.js","assets/index-fab365ac.css","assets/useProducts-4c9cc6dd.js","assets/useQuery-fef0428f.js","assets/useMutation-04d1b243.js","assets/Alert-970a7765.js","assets/hook-87ee9a06.js","assets/Spinner-f490c646.js","assets/Button-98115848.js","assets/Table-2e1e6572.js","assets/Badge-f7a378fe.js","assets/Form-3dd09149.js","assets/FormControl-92329ab5.js","assets/ElementChildren-dbbb72ab.js","assets/Nav-d0d45958.js","assets/DataKey-e12315fd.js","assets/NavContext-cbce7ab2.js","assets/useMergedRefs-c0c7f279.js","assets/NavbarContext-c9a65507.js","assets/ButtonGroup-9fb69fa0.js","assets/Modal-d1b37a71.js","assets/AbstractModalHeader-b51e44f5.js","assets/useWindow-25e16477.js","assets/hasClass-d6dc9e47.js"])),we=()=>(console.log("[Booking] Routes component rendered"),e.jsxs(re,{children:[e.jsx($,{index:!0,element:e.jsx(Ce,{})}),e.jsx($,{path:":id",element:e.jsx(p.Suspense,{fallback:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(M,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading booking details..."})]}),children:e.jsx(ke,{})})})]})),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));export{Ue as i,$e as u};
