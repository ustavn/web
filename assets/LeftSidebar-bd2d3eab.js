import{m as k,r as d,j as e,M as p,Q as y,T as C,l as h,L as x,i as N}from"./index-d44dc752.js";import{S as L}from"./index-69b6c327.js";import{f as S,a as f,g as E}from"./menu-62da0fae.js";import{C as M}from"./Collapse-4a93fcd4.js";import{u as R}from"./useUsers-45eb4acf.js";import{L as U}from"./logo-dark-8200dc8a.js";import{l as B,a as F}from"./logo-dark-sm-e671b90b.js";import{S as w}from"./Spinner-cb54056f.js";import"./useQuery-bcafff71.js";import"./useMutation-e99f167c.js";const b=({item:s,linkClassName:a,subMenuClassNames:l,activeMenuItems:t,toggleMenu:o})=>{const[m,u]=d.useState(t.includes(s.key)),{settings:r}=y(),i=r.sidebar.size===C.sidebar.size.condensed;d.useEffect(()=>{u(t.includes(s.key))},[t,s]);const g=n=>{n.preventDefault();const c=!m;return u(c),o&&o(s,c),!1};return e.jsxs("li",{className:h("side-nav-item",{"menuitem-active":m}),children:[e.jsxs(x,{to:"",onClick:g,"data-menu-key":s.key,"aria-expanded":m,className:a,children:[s.icon&&e.jsx("i",{className:s.icon}),s.badge?e.jsx("span",{className:`badge bg-${s.badge.variant} float-end`,children:s.badge.text}):e.jsx("span",{className:"menu-arrow"}),e.jsxs("span",{children:[" ",s.label," "]})]}),e.jsx(M,{in:m,children:e.jsx("div",{className:i?"collapse":"",children:e.jsx("ul",{className:h(l),id:"sidebarDashboards",children:(s.children||[]).map((n,c)=>e.jsx(p.Fragment,{children:n.children?e.jsx(b,{item:n,linkClassName:t.includes(n.key)?"active":"",activeMenuItems:t,subMenuClassNames:"side-nav-third-level",toggleMenu:o}):e.jsx(v,{item:n,className:t.includes(n.key)?"menuitem-active":"",linkClassName:t.includes(n.key)?"active":""})},c.toString()))})})})]})},v=({item:s,className:a,linkClassName:l})=>e.jsx("li",{className:a,children:e.jsx(z,{item:s,className:l})}),z=({item:s,className:a})=>e.jsxs(x,{to:s.url,target:s.target,className:`side-nav-link-ref ${a}`,"data-menu-key":s.key,children:[s.icon?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:s.icon}),e.jsxs("span",{children:["Â ",s.label]})]}):s.label,s.badge&&e.jsx("span",{className:h("badge","bg-"+s.badge.variant,"rounded","font-10","float-end",{"text-dark":s.badge.variant==="light","text-light":s.badge.variant==="dark"||s.badge.variant==="secondary"}),children:s.badge.text})]}),A=({menuItems:s})=>{const a=k(),l=d.useRef(null),[t,o]=d.useState([]),m=(r,i)=>{i&&o([r.key,...f(s,r)])},u=d.useCallback(()=>{const r=document.getElementById("main-side-menu");let i=null;if(r){const g=r.getElementsByClassName("side-nav-link-ref");for(let n=0;n<g.length;++n)if(a.pathname===g[n].pathname){i=g[n];break}if(i){const n=i.getAttribute("data-menu-key"),c=S(s,n);c&&o([c.key,...f(s,c)])}}},[a.pathname,s]);return d.useEffect(()=>{u()},[u]),e.jsx("ul",{className:"side-nav",ref:l,id:"main-side-menu",children:(s||[]).map((r,i)=>e.jsx(p.Fragment,{children:r.isTitle?e.jsx("li",{className:"side-nav-title",children:r.label}):e.jsx(e.Fragment,{children:r.children?e.jsx(b,{item:r,toggleMenu:m,subMenuClassNames:"side-nav-second-level",activeMenuItems:t,linkClassName:"side-nav-link"}):e.jsx(v,{item:r,linkClassName:"side-nav-link",className:`side-nav-item ${t.includes(r.key)?"menuitem-active":""}`})})},i.toString()))})},T=()=>{const{data:s,isLoading:a}=R(),l=()=>a?"Loading...":s&&(s.fullName||s.email||s.phone)||"User";return e.jsx("div",{className:"leftbar-user",children:e.jsxs(x,{to:"/apps/profile",children:[e.jsx("img",{src:N,alt:"user-image",height:"42",className:"rounded-circle shadow-sm"}),e.jsx("span",{className:"leftbar-user-name mt-2",children:a?e.jsx(w,{animation:"border",size:"sm",variant:"light"}):l()})]})})},j=()=>e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsx(A,{menuItems:E()}),e.jsx("div",{className:"clearfix"})]}),J=({isCondensed:s,leftbarDark:a})=>{const l=d.useRef(null),t=o=>{l&&l.current&&l.current.contains(o.target)||document.body&&document.body.classList.remove("sidebar-enable")};return d.useEffect(()=>(document.addEventListener("mousedown",t,!1),()=>{document.removeEventListener("mousedown",t,!1)}),[]),e.jsxs("div",{className:"leftside-menu",ref:l,children:[e.jsxs(x,{to:"/",className:`logo ${a?"logo-light":"logo-dark"}`,children:[e.jsx("span",{className:"logo-lg",children:e.jsx("img",{src:a?N:U,alt:"logo",height:"16"})}),e.jsx("span",{className:"logo-sm",children:e.jsx("img",{src:a?B:F,alt:"logo",height:"16"})})]}),!s&&e.jsx(L,{style:{maxHeight:"100%"},scrollbarMaxSize:320,children:e.jsx(j,{})}),s&&e.jsx(j,{})]})};export{J as default};
