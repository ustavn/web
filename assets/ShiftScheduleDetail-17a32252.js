import{a6 as y,a as E,a5 as H,r as j,j as e,P as m,d as h,f as r,h as v}from"./index-f3718d6f.js";import{b as k,c as F}from"./useShiftSchedules-f75de948.js";import{A as f}from"./Alert-97e29c50.js";import{S as B}from"./Spinner-dba056ca.js";import{B as l}from"./Button-e5255a38.js";import{B as A}from"./Badge-ae92dd50.js";import{M as u}from"./Modal-72de89ab.js";import{F as s}from"./Form-aa5dcb37.js";import"./useQuery-c64cdbe9.js";import"./useMutation-50b84c76.js";import"./hook-fa472897.js";import"./AbstractModalHeader-bc0eb37f.js";import"./useWindow-41dd01a7.js";import"./hasClass-f08a7e6f.js";import"./useMergedRefs-33faaebf.js";import"./DataKey-e12315fd.js";import"./ElementChildren-9e4b5230.js";const Q=()=>{var b;const{id:c}=y(),S=E(),{showNotification:x}=H(),[T,p]=j.useState(!1),[t,d]=j.useState({name:"",timeZone:"SE Asia Standard Time",appointmentTimeHourMin:0,appointmentTimeHourMax:0,isActive:!0}),{data:i,isLoading:C,error:n,isError:g}=k(c||""),o=F();if(j.useEffect(()=>{i&&d({name:i.name,timeZone:i.timeZone,appointmentTimeHourMin:i.appointmentTimeHourMin,appointmentTimeHourMax:i.appointmentTimeHourMax,isActive:i.isActive})},[i]),j.useEffect(()=>{g&&n&&x(n instanceof Error?n.message:"Failed to load shift schedule details","error")},[g,n,x]),!c)return e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Shift Schedule Detail",subName:"Apps"}),e.jsx(f,{variant:"danger",children:"Shift Schedule ID is required"})]});const M=async a=>{if(a.preventDefault(),!!c)try{await o.mutateAsync({id:c,data:t}),p(!1),x("Shift schedule updated successfully","success")}catch(N){x(N instanceof Error?N.message:"Failed to update shift schedule","error")}};return C?e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Shift Schedule Detail",subName:"Apps"}),e.jsxs("div",{className:"text-center py-5",children:[e.jsx(B,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading shift schedule details..."})]})]}):g||n?e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Shift Schedule Detail",subName:"Apps"}),e.jsxs(f,{variant:"danger",children:[e.jsx("h5",{children:"Failed to load shift schedule"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Error:"})," ",n instanceof Error?n.message:String(n)]}),e.jsx(l,{variant:"secondary",onClick:()=>S("/apps/shift-schedules"),className:"mt-2",children:"Back to Shift Schedules"})]})]}):i?e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Shift Schedule Detail",subName:"Apps"}),e.jsx(h,{children:e.jsx(r,{xs:12,children:e.jsxs(v,{children:[e.jsxs(v.Header,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{className:"mb-0",children:"Shift Schedule Information"}),e.jsxs(l,{variant:"primary",onClick:()=>p(!0),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),"Edit"]})]}),e.jsxs(v.Body,{children:[e.jsxs(h,{children:[e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Name:"}),e.jsx("p",{className:"mb-0",children:i.name})]})}),e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Status:"}),e.jsx("p",{className:"mb-0",children:i.isActive?e.jsx(A,{bg:"success",children:"Active"}):e.jsx(A,{bg:"secondary",children:"Inactive"})})]})})]}),e.jsxs(h,{children:[e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Time Zone:"}),e.jsx("p",{className:"mb-0",children:i.timeZone})]})}),e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Appointment Time Range:"}),e.jsxs("p",{className:"mb-0",children:[i.appointmentTimeHourMin,":00 - ",i.appointmentTimeHourMax,":00"]})]})})]}),i.createdAt&&e.jsxs(h,{children:[e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Created At:"}),e.jsx("p",{className:"mb-0",children:new Date(i.createdAt).toLocaleString("vi-VN")})]})}),i.updatedAt&&e.jsx(r,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Updated At:"}),e.jsx("p",{className:"mb-0",children:new Date(i.updatedAt).toLocaleString("vi-VN")})]})})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(l,{variant:"secondary",onClick:()=>S("/apps/shift-schedules"),children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"}),"Back to Shift Schedules"]})})]})]})})}),e.jsxs(u,{show:T,onHide:()=>p(!1),size:"lg",children:[e.jsx(u.Header,{closeButton:!0,children:e.jsx(u.Title,{children:"Edit Shift Schedule"})}),e.jsxs(s,{onSubmit:M,children:[e.jsxs(u.Body,{children:[o.isError&&e.jsxs(f,{variant:"danger",dismissible:!0,children:["Failed to update shift schedule: ",(b=o.error)==null?void 0:b.message]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Schedule Name *"}),e.jsx(s.Control,{type:"text",placeholder:"Morning Shift",value:t.name,onChange:a=>d({...t,name:a.target.value}),required:!0})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Time Zone *"}),e.jsxs(s.Select,{value:t.timeZone,onChange:a=>d({...t,timeZone:a.target.value}),required:!0,children:[e.jsx("option",{value:"SE Asia Standard Time",children:"SE Asia Standard Time (UTC+7)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"Asia/Ho Chi Minh"}),e.jsx("option",{value:"Asia/Bangkok",children:"Asia/Bangkok"}),e.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore"})]})]}),e.jsxs(h,{children:[e.jsx(r,{md:6,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Appointment Time Hour Min *"}),e.jsx(s.Control,{type:"number",min:"0",max:"23",value:t.appointmentTimeHourMin,onChange:a=>d({...t,appointmentTimeHourMin:parseInt(a.target.value,10)||0}),required:!0}),e.jsx(s.Text,{className:"text-muted",children:"Minimum hour (0-23)"})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Appointment Time Hour Max *"}),e.jsx(s.Control,{type:"number",min:"0",max:"23",value:t.appointmentTimeHourMax,onChange:a=>d({...t,appointmentTimeHourMax:parseInt(a.target.value,10)||0}),required:!0}),e.jsx(s.Text,{className:"text-muted",children:"Maximum hour (0-23)"})]})})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Check,{type:"checkbox",label:"Active",checked:t.isActive,onChange:a=>d({...t,isActive:a.target.checked})}),e.jsx(s.Text,{className:"text-muted",children:"Whether this shift schedule is currently active"})]})]}),e.jsxs(u.Footer,{children:[e.jsx(l,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),e.jsx(l,{variant:"primary",type:"submit",disabled:o.isPending,children:o.isPending?"Updating...":"Update Schedule"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Shift Schedule Detail",subName:"Apps"}),e.jsxs(f,{variant:"warning",children:[e.jsx("h5",{children:"Shift schedule not found"}),e.jsxs("p",{children:["No shift schedule found with ID: ",c]}),e.jsx(l,{variant:"secondary",onClick:()=>S("/apps/shift-schedules"),className:"mt-2",children:"Back to Shift Schedules"})]})]})};export{Q as default};
