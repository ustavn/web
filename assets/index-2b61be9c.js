import{r as h,j as e,P as k,d as f,f as m,h as g}from"./index-1c09459b.js";import{u as w,a as B}from"./useShiftSchedules-3005bd06.js";import{F as t}from"./Form-9237be30.js";import{B as x}from"./Button-f56a0820.js";import{A as C}from"./Alert-582bd80a.js";import{S as F}from"./Spinner-ed2097a1.js";import{T as D}from"./Table-3ddf39e5.js";import{B as b}from"./Badge-8e317aab.js";import{M as o}from"./Modal-1b87b88a.js";import"./useQuery-00218134.js";import"./useMutation-cc409948.js";import"./FormControl-e238e16f.js";import"./ElementChildren-ab2d58d5.js";import"./hook-95b25f1d.js";import"./AbstractModalHeader-a20fb1bf.js";import"./useWindow-687076da.js";import"./hasClass-87521f5b.js";import"./useMergedRefs-7e23477e.js";import"./DataKey-e12315fd.js";const L=()=>{var p;const[l,A]=h.useState(""),[y,d]=h.useState(!1),[s,a]=h.useState({providerId:"",name:"",timeZone:"SE Asia Standard Time",isActive:!0}),{data:N=[],isLoading:T,error:u}=w(),n=B(),c=N.filter(r=>r.name.toLowerCase().includes(l.toLowerCase())||r.providerId.toLowerCase().includes(l.toLowerCase())),I=async r=>{var j,S,v;r.preventDefault(),console.log("[ShiftScheduleApp] Submitting form data:",s);try{const i=await n.mutateAsync(s);console.log("[ShiftScheduleApp] Creation successful:",i),d(!1),a({providerId:"",name:"",timeZone:"SE Asia Standard Time",isActive:!0})}catch(i){console.error("[ShiftScheduleApp] Failed to create shift schedule:",i),console.error("[ShiftScheduleApp] Error details:",(j=i.response)==null?void 0:j.data),alert(`Failed to create shift schedule: ${((v=(S=i.response)==null?void 0:S.data)==null?void 0:v.error)||i.message}`)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Shift Schedule Management",subName:"Apps"}),e.jsx(f,{children:e.jsx(m,{xs:12,children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(f,{className:"mb-3",children:[e.jsx(m,{md:6,children:e.jsx(t.Control,{type:"text",placeholder:"Search by name or provider ID...",value:l,onChange:r=>A(r.target.value)})}),e.jsx(m,{md:6,className:"text-end",children:e.jsxs(x,{variant:"primary",onClick:()=>d(!0),children:[e.jsx("i",{className:"uil uil-plus me-1"})," Create Shift Schedule"]})})]}),u&&e.jsxs(C,{variant:"danger",dismissible:!0,children:["Failed to load shift schedules: ",u.message]}),T?e.jsx("div",{className:"text-center py-5",children:e.jsx(F,{animation:"border",variant:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("h5",{children:["Total Schedules: ",c.length]})}),e.jsxs(D,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Provider ID"}),e.jsx("th",{children:"Time Zone"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-4 text-muted",children:"No shift schedules found"})}):c.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:r.name})}),e.jsx("td",{children:e.jsx("code",{children:r.providerId})}),e.jsx("td",{children:r.timeZone}),e.jsx("td",{children:r.isActive?e.jsx(b,{bg:"success",children:"Active"}):e.jsx(b,{bg:"secondary",children:"Inactive"})}),e.jsx("td",{children:new Date(r.createdAt).toLocaleDateString("vi-VN")})]},r.id))})]})]})]})})})}),e.jsxs(o,{show:y,onHide:()=>d(!1),children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"Create Shift Schedule"})}),e.jsxs(t,{onSubmit:I,children:[e.jsxs(o.Body,{children:[n.isError&&e.jsxs(C,{variant:"danger",dismissible:!0,children:["Failed to create shift schedule: ",(p=n.error)==null?void 0:p.message]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Schedule Name *"}),e.jsx(t.Control,{type:"text",placeholder:"Morning Shift",value:s.name,onChange:r=>a({...s,name:r.target.value}),required:!0})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Provider ID *"}),e.jsx(t.Control,{type:"text",placeholder:"d290f1ee-6c54-4b01-90e6-d701748f0851",value:s.providerId,onChange:r=>a({...s,providerId:r.target.value}),required:!0}),e.jsx(t.Text,{className:"text-muted",children:"UUID of the provider/organization"})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Time Zone *"}),e.jsxs(t.Select,{value:s.timeZone,onChange:r=>a({...s,timeZone:r.target.value}),required:!0,children:[e.jsx("option",{value:"SE Asia Standard Time",children:"SE Asia Standard Time (UTC+7)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"Asia/Ho Chi Minh"}),e.jsx("option",{value:"Asia/Bangkok",children:"Asia/Bangkok"}),e.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore"})]})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Check,{type:"checkbox",label:"Active",checked:s.isActive,onChange:r=>a({...s,isActive:r.target.checked})}),e.jsx(t.Text,{className:"text-muted",children:"Whether this shift schedule is currently active"})]})]}),e.jsxs(o.Footer,{children:[e.jsx(x,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(x,{variant:"primary",type:"submit",disabled:n.isPending,children:n.isPending?"Creating...":"Create Schedule"})]})]})]})]})},Y=()=>e.jsx(L,{});export{Y as default};
