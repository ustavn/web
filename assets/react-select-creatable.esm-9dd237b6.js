import{r as d,j as i}from"./index-d44dc752.js";import{u as T,C as z}from"./index.esm-a4d30db8.js";import{F as L}from"./Form-67e6f44c.js";import{I as _}from"./InputGroup-0726e51b.js";import{_ as H}from"./hook-d4a5a220.js";import{_ as J,a as B,b as M,v as K,d as G,g as Q,e as X,u as Y,f as Z}from"./react-select.esm-3440cf97.js";const y=(e,t="USD")=>{if(e==null||e==="")return"";const o=typeof e=="string"?parseFloat(e.replace(/[^\d.-]/g,"")):e;return isNaN(o)?"":t==="VND"?o.toLocaleString("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}):o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},W=(e,t="USD")=>{const o=e.replace(/[^\d.-]/g,"");if(t==="VND"){const n=parseInt(o,10);return isNaN(n)?0:n}const a=parseFloat(o);return isNaN(a)?0:a},q=(e="USD",t)=>t||(e==="VND"?"â‚«":e==="USD"?"$":e),ee=({id:e,className:t,containerClass:o,label:a,placeholder:n,helpText:s,required:f,symbol:F,currency:h,defaultPlaceholder:x,field:u,fieldState:r,...O})=>{var V;const[l,v]=d.useState(!1),[c,m]=d.useState("");return d.useEffect(()=>{l||m(y(u.value,h))},[u.value,h,l]),i.jsxs(L.Group,{className:o??"",children:[a&&i.jsx(L.Label,{children:a}),i.jsxs(_,{children:[i.jsx(_.Text,{children:F}),i.jsx(L.Control,{id:e,type:"text",...O,value:l?c:y(u.value,h),onFocus:C=>{v(!0);const g=u.value??"";m(g.toString())},onChange:C=>{const g=C.target.value;m(g);const p=W(g,h);u.onChange(p)},onBlur:C=>{v(!1);const g=W(C.target.value,h);u.onChange(g)},placeholder:n||x,className:t,isInvalid:!!((V=r.error)!=null&&V.message),required:f})]}),s&&i.jsx(L.Text,{id:`${u.name}-help`,muted:!0,children:s}),r.error&&i.jsx(L.Control.Feedback,{type:"invalid",children:r.error.message})]})};function pe({name:e,id:t,className:o,containerClass:a,label:n,placeholder:s,helpText:f,errors:F,register:h,required:x,currencySymbol:u,currency:r="USD",value:O,onChange:l,...v}){const[c,m]=d.useState(""),[V,C]=d.useState(!1),g=q(r,u),p=r==="VND"?"0":"0.00",$=T(),D=!!$&&!!e;if(d.useEffect(()=>{!D&&!V&&m(y(O,r))},[O,r,D,V]),D&&e){const{control:w}=$;return i.jsx(z,{name:e,control:w,render:({field:N,fieldState:b})=>i.jsx(ee,{id:t,className:o,containerClass:a,label:n,placeholder:s,helpText:f,required:x,symbol:g,currency:r,defaultPlaceholder:p,field:N,fieldState:b,...v})})}const j=w=>{C(!0);const N=O??"";m(N.toString()),w.target.value=N.toString()},P=w=>{const N=w.target.value;m(N);const b=W(N,r);l==null||l(b)},S=()=>{C(!1),m(y(O,r))};return i.jsxs(L.Group,{className:a??"",children:[n&&i.jsx(L.Label,{children:n}),i.jsxs(_,{children:[i.jsx(_.Text,{children:g}),i.jsx(L.Control,{id:t,type:"text",...v,value:c,onFocus:j,onChange:P,onBlur:S,placeholder:s||p,className:o,required:x})]}),f&&i.jsx(L.Text,{id:t?`${t}-help`:"money-help",muted:!0,children:f})]})}var te=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],k=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=String(t).toLowerCase(),s=String(a.getOptionValue(o)).toLowerCase(),f=String(a.getOptionLabel(o)).toLowerCase();return s===n||f===n},E={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,o,a,n){return!(!t||o.some(function(s){return k(t,s,n)})||a.some(function(s){return k(t,s,n)}))},getNewOptionData:function(t,o){return{label:o,value:t,__isNew__:!0}}};function oe(e){var t=e.allowCreateWhileLoading,o=t===void 0?!1:t,a=e.createOptionPosition,n=a===void 0?"last":a,s=e.formatCreateLabel,f=s===void 0?E.formatCreateLabel:s,F=e.isValidNewOption,h=F===void 0?E.isValidNewOption:F,x=e.getNewOptionData,u=x===void 0?E.getNewOptionData:x,r=e.onCreateOption,O=e.options,l=O===void 0?[]:O,v=e.onChange,c=J(e,te),m=c.getOptionValue,V=m===void 0?Q:m,C=c.getOptionLabel,g=C===void 0?X:C,p=c.inputValue,$=c.isLoading,D=c.isMulti,j=c.value,P=c.name,S=d.useMemo(function(){return h(p,B(j),l,{getOptionValue:V,getOptionLabel:g})?u(p,f(p)):void 0},[f,u,g,V,p,h,l,j]),w=d.useMemo(function(){return(o||!$)&&S?n==="first"?[S].concat(M(l)):[].concat(M(l),[S]):l},[o,n,$,S,l]),N=d.useCallback(function(b,I){if(I.action!=="select-option")return v(b,I);var A=Array.isArray(b)?b:[b];if(A[A.length-1]===S){if(r)r(p);else{var U=u(p,p),R={action:"create-option",name:P,option:U};v(K(D,[].concat(M(B(j)),[U]),U),R)}return}v(b,I)},[u,p,D,P,S,r,v,j]);return G(G({},c),{},{options:w,onChange:N})}var ae=d.forwardRef(function(e,t){var o=Y(e),a=oe(o);return d.createElement(Z,H({ref:t},a))}),ce=ae;export{ce as C,pe as M};
