import{r as d,u as p,j as e,c as g,a as f,b as j,d as N,e as k,p as b,g as v}from"./index-3c37d160.js";const u=d.forwardRef(({bsPrefix:t,variant:s,animation:c="border",size:n,as:r="div",className:m,...o},i)=>{t=p(t,"spinner");const l=`${t}-${c}`;return e.jsx(r,{ref:i,...o,className:g(m,l,n&&`${l}-${n}`,s&&`text-${s}`)})});u.displayName="Spinner";const y=u;function S(){const[t]=f(),s=j(),{saveOAuthSession:c}=N(),[n,r]=d.useState("");return d.useEffect(()=>{(async()=>{const o=t.get("code"),i=t.get("error"),l=t.get("error_description");if(i){r(l||i),setTimeout(()=>s("/account/login"),3e3);return}if(!o){r("Authorization code not found"),setTimeout(()=>s("/account/login"),3e3);return}try{const a=await k(o),h=b(a.access_token);c({accessToken:a.access_token,refreshToken:a.refresh_token,idToken:a.id_token,expiresAt:Date.now()+a.expires_in*1e3,user:h});const x=v();s(x)}catch(a){console.error("OAuth callback error:",a),r(a.message||"Failed to complete authentication"),setTimeout(()=>s("/account/login"),3e3)}})()},[t,s,c]),e.jsx("div",{className:"d-flex flex-column align-items-center justify-content-center",style:{minHeight:"100vh"},children:n?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-danger mb-3",children:e.jsx("i",{className:"mdi mdi-alert-circle",style:{fontSize:"48px"}})}),e.jsx("h4",{className:"text-danger mb-2",children:"Authentication Failed"}),e.jsx("p",{className:"text-muted",children:n}),e.jsx("p",{className:"text-muted",children:"Redirecting to login..."})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(y,{animation:"border",variant:"primary",className:"mb-3"}),e.jsx("h4",{className:"mb-2",children:"Completing authentication..."}),e.jsx("p",{className:"text-muted",children:"Please wait while we log you in."})]})})}export{S as default};
