import{u as o}from"./useQuery-fef0428f.js";import{o as a,U as n}from"./index-7abc2e1c.js";import{u as c}from"./useMutation-04d1b243.js";const i="https://api.dev.usta.vn",r=a.create({baseURL:`${i}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(async e=>{const t=localStorage.getItem("_USTA_OAUTH");if(t)try{const s=JSON.parse(t);e.headers.Authorization=`Bearer ${s.accessToken}`}catch(s){console.error("[Shift Schedule API] Failed to parse OAuth session:",s)}return e},e=>Promise.reject(e));r.interceptors.response.use(e=>e,e=>{var t;return console.error("[Shift Schedule API] Response error:",((t=e.response)==null?void 0:t.data)||e.message),Promise.reject(e)});async function u(e={}){const t=await r.get("/shift-schedules/",{params:e});if(t.data.success)return t.data.data;throw new Error(t.data.error||"Failed to fetch shift schedules")}async function h(e){var t;console.log("[Shift Schedule API] Creating shift schedule with data:",JSON.stringify(e,null,2));try{const s=await r.post("/shift-schedules/",e);if(console.log("[Shift Schedule API] Create response:",s.data),s.data.success)return s.data.data;throw new Error(s.data.error||"Failed to create shift schedule")}catch(s){throw console.error("[Shift Schedule API] Create error:",s),console.error("[Shift Schedule API] Error response:",(t=s.response)==null?void 0:t.data),s}}function S(e={}){return o({queryKey:["shift-schedules",e],queryFn:()=>u(e),staleTime:3e4,retry:2,select:t=>t||[]})}function p(){const e=n();return c({mutationFn:t=>h(t),onSuccess:()=>{e.invalidateQueries({queryKey:["shift-schedules"]})}})}export{p as a,S as u};
