import{r as c,j as e,P as I,d as S,f as h,h as g}from"./index-69760bb1.js";import{u as k,a as w}from"./useShiftSchedules-de11ff86.js";import{F as t}from"./Form-85991f65.js";import{B as m}from"./Button-e7c1a631.js";import{A as f}from"./Alert-5b1f7b4e.js";import{S as B}from"./Spinner-f540a7f4.js";import{T as D}from"./Table-023d7f0d.js";import{B as C}from"./Badge-ec027720.js";import{M as n}from"./Modal-bef624a7.js";import"./useQuery-00606683.js";import"./useMutation-ddfe97de.js";import"./ElementChildren-386d1b68.js";import"./hook-cde11bc5.js";import"./AbstractModalHeader-8be0b776.js";import"./useWindow-a5361f94.js";import"./hasClass-24c275a2.js";import"./useMergedRefs-ff3ecb93.js";import"./DataKey-e12315fd.js";const F=()=>{var u;const[l,b]=c.useState(""),[A,d]=c.useState(!1),[s,i]=c.useState({providerId:"",name:"",timeZone:"SE Asia Standard Time",isActive:!0}),{data:y=[],isLoading:N,error:x}=k(),a=w(),o=y.filter(r=>r.name.toLowerCase().includes(l.toLowerCase())||r.providerId.toLowerCase().includes(l.toLowerCase())),T=async r=>{var j,p;r.preventDefault();try{await a.mutateAsync(s),d(!1),i({providerId:"",name:"",timeZone:"SE Asia Standard Time",isActive:!0})}catch(v){alert(`Failed to create shift schedule: ${((p=(j=v.response)==null?void 0:j.data)==null?void 0:p.error)||v.message}`)}};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Shift Schedule Management",subName:"Apps"}),e.jsx(S,{children:e.jsx(h,{xs:12,children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(S,{className:"mb-3",children:[e.jsx(h,{md:6,children:e.jsx(t.Control,{type:"text",placeholder:"Search by name or provider ID...",value:l,onChange:r=>b(r.target.value)})}),e.jsx(h,{md:6,className:"text-end",children:e.jsxs(m,{variant:"primary",onClick:()=>d(!0),children:[e.jsx("i",{className:"uil uil-plus me-1"})," Create Shift Schedule"]})})]}),x&&e.jsxs(f,{variant:"danger",dismissible:!0,children:["Failed to load shift schedules: ",x.message]}),N?e.jsx("div",{className:"text-center py-5",children:e.jsx(B,{animation:"border",variant:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("h5",{children:["Total Schedules: ",o.length]})}),e.jsxs(D,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Provider ID"}),e.jsx("th",{children:"Time Zone"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-4 text-muted",children:"No shift schedules found"})}):o.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:r.name})}),e.jsx("td",{children:e.jsx("code",{children:r.providerId})}),e.jsx("td",{children:r.timeZone}),e.jsx("td",{children:r.isActive?e.jsx(C,{bg:"success",children:"Active"}):e.jsx(C,{bg:"secondary",children:"Inactive"})}),e.jsx("td",{children:new Date(r.createdAt).toLocaleDateString("vi-VN")})]},r.id))})]})]})]})})})}),e.jsxs(n,{show:A,onHide:()=>d(!1),children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Create Shift Schedule"})}),e.jsxs(t,{onSubmit:T,children:[e.jsxs(n.Body,{children:[a.isError&&e.jsxs(f,{variant:"danger",dismissible:!0,children:["Failed to create shift schedule: ",(u=a.error)==null?void 0:u.message]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Schedule Name *"}),e.jsx(t.Control,{type:"text",placeholder:"Morning Shift",value:s.name,onChange:r=>i({...s,name:r.target.value}),required:!0})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Provider ID *"}),e.jsx(t.Control,{type:"text",placeholder:"d290f1ee-6c54-4b01-90e6-d701748f0851",value:s.providerId,onChange:r=>i({...s,providerId:r.target.value}),required:!0}),e.jsx(t.Text,{className:"text-muted",children:"UUID of the provider/organization"})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Time Zone *"}),e.jsxs(t.Select,{value:s.timeZone,onChange:r=>i({...s,timeZone:r.target.value}),required:!0,children:[e.jsx("option",{value:"SE Asia Standard Time",children:"SE Asia Standard Time (UTC+7)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"Asia/Ho Chi Minh"}),e.jsx("option",{value:"Asia/Bangkok",children:"Asia/Bangkok"}),e.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore"})]})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Check,{type:"checkbox",label:"Active",checked:s.isActive,onChange:r=>i({...s,isActive:r.target.checked})}),e.jsx(t.Text,{className:"text-muted",children:"Whether this shift schedule is currently active"})]})]}),e.jsxs(n.Footer,{children:[e.jsx(m,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(m,{variant:"primary",type:"submit",disabled:a.isPending,children:a.isPending?"Creating...":"Create Schedule"})]})]})]})]})},Q=()=>e.jsx(F,{});export{Q as default};
