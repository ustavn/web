import{a as L,r as a,j as e,P as M,d as u,f as h,h as g,_ as B,R as D,c as C}from"./index-1c742463.js";import{u as P,a as _}from"./useZones-74324ffb.js";import{F as t}from"./Form-05ad4a6a.js";import{B as x}from"./Button-a842f113.js";import{A as F}from"./Alert-8204e7ea.js";import{S as f}from"./Spinner-ad3d02ac.js";import{T as R}from"./Table-82803535.js";import{B as v}from"./Badge-6e0fdd54.js";import{M as n}from"./Modal-f8756c89.js";import"./useQuery-0e03b41d.js";import"./useMutation-59983a6c.js";import"./ElementChildren-8c132aea.js";import"./hook-fa5e7b20.js";import"./AbstractModalHeader-834b3d34.js";import"./useWindow-aa1a9643.js";import"./hasClass-aa277adc.js";import"./useMergedRefs-1d178a6e.js";import"./DataKey-e12315fd.js";const T=()=>{const b=L(),[l,y]=a.useState(""),[N,i]=a.useState(!1),[r,o]=a.useState({name:"",code:"",description:""}),{data:c=[],isLoading:S,error:p}=P(),d=_(),j=c.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.code.toLowerCase().includes(l.toLowerCase())),Z=a.useMemo(()=>{const s=new Map;return c.forEach(m=>{s.set(m.id,m.name)}),s},[c]),w=s=>s?Z.get(s)||s:"-",A=async s=>{s.preventDefault();try{await d.mutateAsync(r),i(!1),o({name:"",code:"",description:""})}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Zone Management",subName:"Apps"}),e.jsx(u,{children:e.jsx(h,{xs:12,children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(u,{className:"mb-3",children:[e.jsx(h,{md:6,children:e.jsx(t.Control,{type:"text",placeholder:"Search zones...",value:l,onChange:s=>y(s.target.value)})}),e.jsx(h,{md:6,className:"text-end",children:e.jsxs(x,{variant:"primary",onClick:()=>i(!0),children:[e.jsx("i",{className:"uil uil-plus me-1"})," Create Zone"]})})]}),p&&e.jsxs(F,{variant:"danger",dismissible:!0,children:["Failed to load zones: ",p.message]}),S?e.jsx("div",{className:"text-center py-5",children:e.jsx(f,{animation:"border",variant:"primary"})}):e.jsxs(R,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Parent Zone"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"})]})}),e.jsx("tbody",{children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4 text-muted",children:"No zones found"})}):j.map(s=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>b(`/apps/zones/${s.id}/children`),children:[e.jsx("td",{children:e.jsx("strong",{children:s.code})}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.description||"-"}),e.jsx("td",{children:w(s.parentId)}),e.jsx("td",{children:s.isActive!==void 0?s.isActive?e.jsx(v,{bg:"success",children:"Active"}):e.jsx(v,{bg:"secondary",children:"Inactive"}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{children:new Date(s.createdAt).toLocaleDateString("vi-VN")})]},s.id))})]})]})})})}),e.jsxs(n,{show:N,onHide:()=>i(!1),children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Create New Zone"})}),e.jsxs(t,{onSubmit:A,children:[e.jsxs(n.Body,{children:[e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Zone Code *"}),e.jsx(t.Control,{type:"text",placeholder:"Q5",value:r.code,onChange:s=>o({...r,code:s.target.value}),required:!0})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Zone Name *"}),e.jsx(t.Control,{type:"text",placeholder:"Quan 5",value:r.name,onChange:s=>o({...r,name:s.target.value}),required:!0})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Description"}),e.jsx(t.Control,{as:"textarea",rows:3,placeholder:"trung tam tp",value:r.description,onChange:s=>o({...r,description:s.target.value})})]})]}),e.jsxs(n.Footer,{children:[e.jsx(x,{variant:"secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx(x,{variant:"primary",type:"submit",disabled:d.isPending,children:d.isPending?"Creating...":"Create Zone"})]})]})]})]})},E=a.lazy(()=>B(()=>import("./ChildZonesApp-8856d6cc.js"),["assets/ChildZonesApp-8856d6cc.js","assets/index-1c742463.js","assets/index-6054c063.css","assets/useZones-74324ffb.js","assets/useQuery-0e03b41d.js","assets/useMutation-59983a6c.js","assets/Button-a842f113.js","assets/Form-05ad4a6a.js","assets/ElementChildren-8c132aea.js","assets/Alert-8204e7ea.js","assets/hook-fa5e7b20.js","assets/Spinner-ad3d02ac.js","assets/Table-82803535.js","assets/Badge-6e0fdd54.js","assets/Modal-f8756c89.js","assets/AbstractModalHeader-834b3d34.js","assets/useWindow-aa1a9643.js","assets/hasClass-aa277adc.js","assets/useMergedRefs-1d178a6e.js","assets/DataKey-e12315fd.js"])),te=()=>e.jsxs(D,{children:[e.jsx(C,{index:!0,element:e.jsx(T,{})}),e.jsx(C,{path:":parentId/children",element:e.jsx(a.Suspense,{fallback:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(f,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}),children:e.jsx(E,{})})})]});export{te as default};
