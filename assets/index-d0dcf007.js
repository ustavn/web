import{r as m,j as e,P as N,d as h,f as n,h as v,L as H}from"./index-c77f71d3.js";import{u as k,a as B}from"./useShiftSchedules-f16e8a0b.js";import{F as i}from"./Form-02fdc037.js";import{B as d}from"./Button-e558b3a0.js";import{A as f}from"./Alert-5ff5c802.js";import{S as L}from"./Spinner-57fd8da3.js";import{T as w}from"./Table-7c003378.js";import{B as C}from"./Badge-62eebc93.js";import{M as l}from"./Modal-743fa430.js";import"./useQuery-1ca363b0.js";import"./useMutation-321b40d5.js";import"./hook-64fa6b32.js";import"./AbstractModalHeader-f3c676a3.js";import"./useWindow-0e4dedaf.js";import"./hasClass-d7067b67.js";import"./useMergedRefs-b50dd209.js";import"./DataKey-e12315fd.js";const F=()=>{var p;const[x,T]=m.useState(""),[b,o]=m.useState(!1),[s,r]=m.useState({name:"",timeZone:"SE Asia Standard Time",appointmentTimeHourMin:0,appointmentTimeHourMax:23,isActive:!0}),{data:A=[],isLoading:y,error:u}=k(),a=B(),c=A.filter(t=>t.name.toLowerCase().includes(x.toLowerCase())),M=async t=>{var j,S;t.preventDefault();try{await a.mutateAsync(s),o(!1),r({name:"",timeZone:"SE Asia Standard Time",appointmentTimeHourMin:0,appointmentTimeHourMax:23,isActive:!0})}catch(g){alert(`Failed to create shift schedule: ${((S=(j=g.response)==null?void 0:j.data)==null?void 0:S.error)||g.message}`)}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Shift Schedule Management",subName:"Apps"}),e.jsx(h,{children:e.jsx(n,{xs:12,children:e.jsx(v,{children:e.jsxs(v.Body,{children:[e.jsxs(h,{className:"mb-3",children:[e.jsx(n,{md:6,children:e.jsx(i.Control,{type:"text",placeholder:"Search by name...",value:x,onChange:t=>T(t.target.value)})}),e.jsx(n,{md:6,className:"text-end",children:e.jsxs(d,{variant:"primary",onClick:()=>o(!0),children:[e.jsx("i",{className:"uil uil-plus me-1"})," Create Shift Schedule"]})})]}),u&&e.jsxs(f,{variant:"danger",dismissible:!0,children:["Failed to load shift schedules: ",u.message]}),y?e.jsx("div",{className:"text-center py-5",children:e.jsx(L,{animation:"border",variant:"primary"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("h5",{children:["Total Schedules: ",c.length]})}),e.jsxs(w,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Time Zone"}),e.jsx("th",{children:"Appointment Time"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4 text-muted",children:"No shift schedules found"})}):c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:t.name})}),e.jsx("td",{children:t.timeZone}),e.jsxs("td",{children:[t.appointmentTimeHourMin,":00 - ",t.appointmentTimeHourMax,":00"]}),e.jsx("td",{children:t.isActive?e.jsx(C,{bg:"success",children:"Active"}):e.jsx(C,{bg:"secondary",children:"Inactive"})}),e.jsx("td",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString("vi-VN"):"-"}),e.jsx("td",{children:e.jsx(H,{to:`/apps/shift-schedules/${t.id}`,children:e.jsxs(d,{variant:"outline-primary",size:"sm",children:[e.jsx("i",{className:"mdi mdi-eye me-1"}),"View"]})})})]},t.id))})]})]})]})})})}),e.jsxs(l,{show:b,onHide:()=>o(!1),children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx(l.Title,{children:"Create Shift Schedule"})}),e.jsxs(i,{onSubmit:M,children:[e.jsxs(l.Body,{children:[a.isError&&e.jsxs(f,{variant:"danger",dismissible:!0,children:["Failed to create shift schedule: ",(p=a.error)==null?void 0:p.message]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Schedule Name *"}),e.jsx(i.Control,{type:"text",placeholder:"Morning Shift",value:s.name,onChange:t=>r({...s,name:t.target.value}),required:!0})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Time Zone *"}),e.jsxs(i.Select,{value:s.timeZone,onChange:t=>r({...s,timeZone:t.target.value}),required:!0,children:[e.jsx("option",{value:"SE Asia Standard Time",children:"SE Asia Standard Time (UTC+7)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"Asia/Ho Chi Minh"}),e.jsx("option",{value:"Asia/Bangkok",children:"Asia/Bangkok"}),e.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore"})]})]}),e.jsxs(h,{children:[e.jsx(n,{md:6,children:e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Appointment Time Hour Min *"}),e.jsx(i.Control,{type:"number",min:"0",max:"23",value:s.appointmentTimeHourMin,onChange:t=>r({...s,appointmentTimeHourMin:parseInt(t.target.value,10)||0}),required:!0}),e.jsx(i.Text,{className:"text-muted",children:"Minimum hour (0-23)"})]})}),e.jsx(n,{md:6,children:e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Appointment Time Hour Max *"}),e.jsx(i.Control,{type:"number",min:"0",max:"23",value:s.appointmentTimeHourMax,onChange:t=>r({...s,appointmentTimeHourMax:parseInt(t.target.value,10)||0}),required:!0}),e.jsx(i.Text,{className:"text-muted",children:"Maximum hour (0-23)"})]})})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Check,{type:"checkbox",label:"Active",checked:s.isActive,onChange:t=>r({...s,isActive:t.target.checked})}),e.jsx(i.Text,{className:"text-muted",children:"Whether this shift schedule is currently active"})]})]}),e.jsxs(l.Footer,{children:[e.jsx(d,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),e.jsx(d,{variant:"primary",type:"submit",disabled:a.isPending,children:a.isPending?"Creating...":"Create Schedule"})]})]})]})]})},Q=()=>e.jsx(F,{});export{Q as default};
