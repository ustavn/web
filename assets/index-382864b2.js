import{j as e,aW as x,r as p,P as j,d as y,f,h,bn as b,v as t}from"./index-038953f0.js";import{u as v,a as N}from"./useCategories-191a1eda.js";import{B as i}from"./Button-3bfbac80.js";import{A as S}from"./Alert-bc52e707.js";import{S as L}from"./Spinner-e48ef451.js";import{M as o}from"./Modal-7d1d46c4.js";import"./useQuery-7bedfd01.js";import"./useMutation-b744f206.js";const D=[{Header:"ID",accessor:"id",defaultCanSort:!1,Cell:({value:a})=>e.jsxs("small",{className:"text-muted",children:[a.substring(0,8),"..."]})},{Header:"Code",accessor:"code",defaultCanSort:!0,Cell:({value:a})=>e.jsx(x,{bg:"primary",children:a})},{Header:"Name",accessor:"name",defaultCanSort:!0,Cell:({value:a})=>e.jsx("strong",{children:a})},{Header:"Level Code",accessor:"levelCode",defaultCanSort:!0,Cell:({value:a})=>e.jsx(x,{bg:"secondary",children:a})},{Header:"Parent ID",accessor:"parentId",defaultCanSort:!1,Cell:({value:a})=>a?e.jsxs("small",{className:"text-muted",children:[a.substring(0,8),"..."]}):e.jsx("span",{className:"text-muted",children:"—"})},{Header:"Description",accessor:"description",defaultCanSort:!1,Cell:({value:a})=>e.jsx("span",{className:"text-muted",children:a||"—"})},{Header:"Created At",accessor:"createdAt",defaultCanSort:!0,Cell:({value:a})=>new Date(a).toLocaleDateString()}],I=[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50}],w=()=>{const[a,n]=p.useState(!1),[r,l]=p.useState({parentId:null,name:"",code:"",description:null}),{data:c,isLoading:C,error:d}=v(),m=N(),g=async s=>{s.preventDefault();try{const u={...r,parentId:r.parentId||null,description:r.description||null};await m.mutateAsync(u),n(!1),l({parentId:null,name:"",code:"",description:null})}catch(u){console.error("Failed to create category:",u)}};return e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Categories",subName:"Apps"}),e.jsx(y,{children:e.jsx(f,{xs:12,children:e.jsx(h,{children:e.jsxs(h.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{className:"header-title",children:"Categories List"}),e.jsxs(i,{variant:"primary",onClick:()=>n(!0),children:[e.jsx("i",{className:"mdi mdi-plus-circle me-1"}),"Create Category"]})]}),d&&e.jsxs(S,{variant:"danger",children:[e.jsx("strong",{children:"Error:"})," ",d instanceof Error?d.message:"Failed to load categories"]}),C?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(L,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading categories..."})]}):c&&c.length>0?e.jsx(b,{columns:D,data:c,pageSize:10,sizePerPageList:I,isSortable:!0,pagination:!0,isSearchable:!0}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("p",{className:"text-muted",children:"No categories found"}),e.jsx(i,{variant:"primary",onClick:()=>n(!0),children:"Create First Category"})]})]})})})}),e.jsxs(o,{show:a,onHide:()=>n(!1),children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"Create New Category"})}),e.jsxs(t,{onSubmit:g,children:[e.jsxs(o.Body,{children:[e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Category Name *"}),e.jsx(t.Control,{type:"text",placeholder:"Enter category name",value:r.name,onChange:s=>l({...r,name:s.target.value}),required:!0})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Category Code *"}),e.jsx(t.Control,{type:"text",placeholder:"e.g., LM",value:r.code,onChange:s=>l({...r,code:s.target.value}),required:!0}),e.jsx(t.Text,{className:"text-muted",children:"Short code to identify this category"})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Parent Category ID (Optional)"}),e.jsx(t.Control,{type:"text",placeholder:"Enter parent category ID",value:r.parentId||"",onChange:s=>l({...r,parentId:s.target.value||null})}),e.jsx(t.Text,{className:"text-muted",children:"Leave empty for root level category"})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Description (Optional)"}),e.jsx(t.Control,{as:"textarea",rows:2,placeholder:"Enter description",value:r.description||"",onChange:s=>l({...r,description:s.target.value||null})})]})]}),e.jsxs(o.Footer,{children:[e.jsx(i,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(i,{variant:"primary",type:"submit",disabled:m.isPending,children:m.isPending?"Creating...":"Create Category"})]})]})]})]})},G=()=>e.jsx(w,{});export{G as default};
