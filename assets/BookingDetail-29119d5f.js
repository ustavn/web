import{a_ as v,a as k,j as e,P as c,d as n,f as l,h as a}from"./index-1c742463.js";import{b as B}from"./useBookings-56b5d18b.js";import{u as y}from"./useProducts-36f8fd77.js";import{A as x}from"./Alert-8204e7ea.js";import{S as w}from"./Spinner-ad3d02ac.js";import{B as h}from"./Button-a842f113.js";import{T as D}from"./Table-82803535.js";import{B as t}from"./Badge-6e0fdd54.js";import"./useQuery-0e03b41d.js";import"./useMutation-59983a6c.js";import"./hook-fa5e7b20.js";const E=()=>{const{id:o}=v(),m=k(),N=B(o||""),{data:s,isLoading:j,error:b}=N,{data:g=[]}=y();if(!o)return e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Booking Detail",subName:"Apps"}),e.jsx(x,{variant:"danger",children:"Booking ID is required"})]});const f=r=>{if(typeof r=="number")switch(r){case 1:return e.jsx(t,{bg:"info",children:"Created"});case 2:return e.jsx(t,{bg:"primary",children:"Assigned"});case 3:return e.jsx(t,{bg:"warning",children:"In Progress"});case 4:return e.jsx(t,{bg:"success",children:"Done"});case 5:return e.jsx(t,{bg:"danger",children:"Failed"});case 6:return e.jsx(t,{bg:"secondary",children:"Cancelled"});default:return e.jsxs(t,{bg:"secondary",children:["Status ",r]})}return e.jsx(t,{bg:"info",children:r||"Unknown"})},u=r=>g.find(d=>d.id===r);return j?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Booking Detail",subName:"Apps"}),e.jsxs("div",{className:"text-center py-5",children:[e.jsx(w,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading booking details..."})]})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Booking Detail",subName:"Apps"}),e.jsxs(x,{variant:"danger",children:[e.jsx("h5",{children:"Failed to load booking"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Error:"})," ",b.message]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Booking ID:"})," ",o]}),e.jsx(h,{variant:"secondary",onClick:()=>m("/apps/booking"),className:"mt-2",children:"Back to Bookings"})]})]}):!j&&!s?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Booking Detail",subName:"Apps"}),e.jsxs(x,{variant:"warning",children:[e.jsx("h5",{children:"Booking not found"}),e.jsxs("p",{children:["No booking found with ID: ",o]}),e.jsx(h,{variant:"secondary",onClick:()=>m("/apps/booking"),className:"mt-2",children:"Back to Bookings"})]})]}):s?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Booking Detail",subName:"Apps"}),e.jsx(n,{children:e.jsxs(l,{xs:12,children:[e.jsx("div",{className:"mb-3",children:e.jsxs(h,{variant:"secondary",onClick:()=>m("/apps/booking"),children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"})," Back to Bookings"]})}),e.jsxs(a,{className:"mb-3",children:[e.jsx(a.Header,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{className:"mb-0",children:"Booking Information"}),f(s.status)]})}),e.jsxs(a.Body,{children:[e.jsxs(n,{children:[e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Booking ID"}),e.jsx("div",{className:"form-control-plaintext",children:e.jsx("code",{children:s.id})})]})}),e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Booking Time"}),e.jsx("div",{className:"form-control-plaintext",children:new Date(s.bookingTime).toLocaleString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})})]}),e.jsx("hr",{}),e.jsxs(n,{children:[e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Customer Name"}),e.jsx("div",{className:"form-control-plaintext",children:s.customerName||e.jsx("span",{className:"text-muted",children:"Not provided"})})]})}),e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Customer Phone"}),e.jsx("div",{className:"form-control-plaintext",children:s.customerPhone||e.jsx("span",{className:"text-muted",children:"-"})})]})})]}),s.customerId&&e.jsx(n,{children:e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Customer ID"}),e.jsx("div",{className:"form-control-plaintext",children:e.jsx("code",{children:s.customerId})})]})})}),e.jsx("hr",{}),e.jsx(n,{children:e.jsx(l,{md:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Address"}),e.jsx("div",{className:"form-control-plaintext",children:s.address||e.jsx("span",{className:"text-muted",children:"Not provided"})})]})})}),s.latitude!==void 0&&s.longitude!==void 0&&e.jsx(n,{children:e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Coordinates"}),e.jsx("div",{className:"form-control-plaintext",children:e.jsxs("small",{children:["Latitude: ",s.latitude.toFixed(6),", Longitude: ",s.longitude.toFixed(6)]})})]})})})]})]}),s.items&&s.items.length>0&&e.jsxs(a,{className:"mb-3",children:[e.jsx(a.Header,{children:e.jsx("h4",{className:"mb-0",children:"Booking Items"})}),e.jsx(a.Body,{children:e.jsxs(D,{hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Subtotal"})]})}),e.jsx("tbody",{children:s.items.map((r,d)=>{const i=u(r.productId),p=((i==null?void 0:i.price)||0)*r.quantity;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("strong",{children:(i==null?void 0:i.name)||r.productId}),(i==null?void 0:i.description)&&e.jsx("div",{className:"text-muted small",children:i.description})]}),e.jsx("td",{children:i!=null&&i.price?e.jsxs(e.Fragment,{children:[i.price.toLocaleString("vi-VN")," VND"]}):e.jsx("span",{className:"text-muted",children:"N/A"})}),e.jsx("td",{children:e.jsx(t,{bg:"info",children:r.quantity})}),e.jsx("td",{children:e.jsxs("strong",{children:[p.toLocaleString("vi-VN")," VND"]})})]},d)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-end fw-bold",children:"Total Price:"}),e.jsx("td",{className:"fw-bold",children:s.totalPrice?e.jsxs(e.Fragment,{children:[s.totalPrice.toLocaleString("vi-VN")," VND"]}):e.jsxs(e.Fragment,{children:[s.items.reduce((r,d)=>{const i=u(d.productId);return r+((i==null?void 0:i.price)||0)*d.quantity},0).toLocaleString("vi-VN")," ","VND"]})})]})})]})})]}),e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsx("h4",{className:"mb-0",children:"Additional Information"})}),e.jsxs(a.Body,{children:[e.jsxs(n,{children:[s.createdBy&&e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Created By"}),e.jsx("div",{className:"form-control-plaintext",children:e.jsx("code",{children:s.createdBy})})]})}),s.technicianId&&e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Technician ID"}),e.jsx("div",{className:"form-control-plaintext",children:e.jsx("code",{children:s.technicianId})})]})})]}),e.jsxs(n,{children:[s.createdAt&&e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Created At"}),e.jsx("div",{className:"form-control-plaintext",children:new Date(s.createdAt).toLocaleString("vi-VN")})]})}),s.updatedAt&&e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Updated At"}),e.jsx("div",{className:"form-control-plaintext",children:new Date(s.updatedAt).toLocaleString("vi-VN")})]})})]}),s.totalPrice&&e.jsx(n,{children:e.jsx(l,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-muted",children:"Total Price"}),e.jsx("div",{className:"form-control-plaintext",children:e.jsxs("h5",{className:"mb-0 text-primary",children:[s.totalPrice.toLocaleString("vi-VN")," VND"]})})]})})})]})]})]})})]}):null};export{E as default};
