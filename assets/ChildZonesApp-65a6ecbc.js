import{ab as L,a as Z,r as m,j as e,P as A,d as u,f as C,h as g}from"./index-779354fe.js";import{b as B,u as D,a as k}from"./useZones-5f3cc943.js";import{B as i}from"./Button-53cf24d2.js";import{F as r}from"./Form-b6219abc.js";import{A as F}from"./Alert-854cdd97.js";import{S as P}from"./Spinner-0314cfbd.js";import{T as M}from"./Table-a8117958.js";import{B as v}from"./Badge-f2281175.js";import{M as n}from"./Modal-1fc26ef5.js";import"./useQuery-06fb6afe.js";import"./useMutation-95c3fba0.js";import"./ElementChildren-acaed9a2.js";import"./hook-1df25ea4.js";import"./AbstractModalHeader-5a063cb2.js";import"./useWindow-c31fb2ce.js";import"./hasClass-aae9c477.js";import"./useMergedRefs-ae3f466f.js";import"./DataKey-e12315fd.js";const ee=()=>{const{parentId:o}=L(),x=Z(),[c,b]=m.useState(""),[f,d]=m.useState(!1),[t,l]=m.useState({name:"",code:"",description:""}),{data:a,isLoading:N}=B(o||""),{data:y=[],isLoading:w,error:j}=D({parentId:o}),h=k(),p=y.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())||s.code.toLowerCase().includes(c.toLowerCase())),S=async s=>{if(s.preventDefault(),!!o)try{await h.mutateAsync({...t,parentId:o}),d(!1),l({name:"",code:"",description:""})}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:`Child Zones - ${(a==null?void 0:a.name)||"Loading..."}`,subName:"Apps"}),e.jsx(u,{children:e.jsx(C,{xs:12,children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{children:[e.jsxs(i,{variant:"link",onClick:()=>x("/apps/zones"),className:"p-0 mb-2",children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"}),"Back to Zones"]}),a&&e.jsx("div",{children:e.jsxs("h5",{className:"mb-0",children:["Child Zones of: ",e.jsx("strong",{children:a.name})," (",a.code,")"]})})]}),e.jsxs(i,{variant:"primary",onClick:()=>d(!0),children:[e.jsx("i",{className:"uil uil-plus me-1"})," Create Child Zone"]})]}),e.jsx(u,{className:"mb-3",children:e.jsx(C,{md:6,children:e.jsx(r.Control,{type:"text",placeholder:"Search zones...",value:c,onChange:s=>b(s.target.value)})})}),j&&e.jsxs(F,{variant:"danger",dismissible:!0,children:["Failed to load zones: ",j.message]}),w||N?e.jsx("div",{className:"text-center py-5",children:e.jsx(P,{animation:"border",variant:"primary"})}):e.jsxs(M,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4 text-muted",children:"No child zones found"})}):p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:s.code})}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.description||"-"}),e.jsx("td",{children:s.isActive!==void 0?s.isActive?e.jsx(v,{bg:"success",children:"Active"}):e.jsx(v,{bg:"secondary",children:"Inactive"}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{children:new Date(s.createdAt).toLocaleDateString("vi-VN")}),e.jsx("td",{children:s.id&&e.jsx(i,{variant:"info",size:"sm",onClick:()=>x(`/apps/zones/${s.id}/children`),children:"View Children"})})]},s.id))})]})]})})})}),e.jsxs(n,{show:f,onHide:()=>d(!1),children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Create New Child Zone"})}),e.jsxs(r,{onSubmit:S,children:[e.jsxs(n.Body,{children:[e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Zone Code *"}),e.jsx(r.Control,{type:"text",placeholder:"Q5",value:t.code,onChange:s=>l({...t,code:s.target.value}),required:!0})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Zone Name *"}),e.jsx(r.Control,{type:"text",placeholder:"Quan 5",value:t.name,onChange:s=>l({...t,name:s.target.value}),required:!0})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Description"}),e.jsx(r.Control,{as:"textarea",rows:3,placeholder:"trung tam tp",value:t.description,onChange:s=>l({...t,description:s.target.value})})]})]}),e.jsxs(n.Footer,{children:[e.jsx(i,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(i,{variant:"primary",type:"submit",disabled:h.isPending,children:h.isPending?"Creating...":"Create Zone"})]})]})]})]})};export{ee as default};
