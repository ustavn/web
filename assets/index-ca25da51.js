import{r as D,z,j as e,l as T,d as y,f as x,h as s,L as f,a2 as F}from"./index-a9e214b4.js";import{u as L}from"./useBookings-da1cfab8.js";import{u as R}from"./useTechnicians-2f961da4.js";import{S as H}from"./Spinner-c68c8441.js";import{C as M}from"./react-apexcharts.min-5b4e0f63.js";import{C as k}from"./CardTitle-b9a06a0e.js";import{m as O}from"./ElementChildren-f40c06ab.js";import{S as Y}from"./index-477a8205.js";import"./useQuery-e1aadf34.js";import"./useMutation-a538ea74.js";import"./Dropdown-45c4d52b.js";import"./DataKey-e12315fd.js";import"./useWindow-8ceca6d8.js";import"./NavContext-f5cd6e03.js";import"./hook-f634bac0.js";import"./useIsomorphicEffect-33eeab91.js";import"./InputGroupContext-1739cb72.js";import"./NavbarContext-525f0bfc.js";import"./Button-c6634469.js";const A=1e3;function U(a,r,t){const l=(a-r)/(t-r)*100;return Math.round(l*A)/A}function S({min:a,now:r,max:t,label:l,visuallyHidden:o,striped:m,animated:n,className:h,style:j,variant:c,bsPrefix:d,...p},g){return e.jsx("div",{ref:g,...p,role:"progressbar",className:T(h,`${d}-bar`,{[`bg-${c}`]:c,[`${d}-bar-animated`]:n,[`${d}-bar-striped`]:n||m}),style:{width:`${U(r,a,t)}%`,...j},"aria-valuenow":r,"aria-valuemin":a,"aria-valuemax":t,children:o?e.jsx("span",{className:"visually-hidden",children:l}):l})}const P=D.forwardRef(({isChild:a=!1,...r},t)=>{const l={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...r};if(l.bsPrefix=z(l.bsPrefix,"progress"),a)return S(l,t);const{min:o,now:m,max:n,label:h,visuallyHidden:j,striped:c,animated:d,bsPrefix:p,variant:g,className:N,children:u,...w}=l;return e.jsx("div",{ref:t,...w,className:T(N,p),children:u?O(u,C=>D.cloneElement(C,{isChild:!0})):S({min:o,now:m,max:n,label:h,visuallyHidden:j,striped:c,animated:d,bsPrefix:p,variant:g},t)})});P.displayName="ProgressBar";const B=P,G=({className:a,children:r,tag:t="div"})=>{const l=t;return e.jsx(l,{className:T("timeline-alt","py-0",a),children:r})},v=({className:a,children:r,tag:t="div"})=>{const l=t;return e.jsx(l,{className:T("timeline-item",a),children:r})},W=()=>{const{data:a,isLoading:r}=L({pageSize:1e3}),{data:t=[],isLoading:l}=R({}),o=(a==null?void 0:a.items)||[],m=(a==null?void 0:a.totalCount)||o.length,n=D.useMemo(()=>{const h=new Date,j=new Date(h.getFullYear(),h.getMonth(),h.getDate()),c=new Date(j);c.setDate(c.getDate()-7);const d=new Date(j);d.setMonth(d.getMonth()-1);const p=o.filter(i=>i.createdAt?new Date(i.createdAt)>=j:!1).length,g=o.filter(i=>i.createdAt?new Date(i.createdAt)>=c:!1).length,N=o.filter(i=>i.createdAt?new Date(i.createdAt)>=d:!1).length,u=o.filter(i=>{const b=typeof i.status=="string"?parseInt(i.status):i.status;return b===0||b===1}).length,w=o.reduce((i,b)=>i+(b.totalPrice||0),0),C=t.length,E=t.filter(i=>i.status===2).length,I=t.filter(i=>i.status===1).length,$=t.filter(i=>i.status===3).length;return{totalBookings:m,todayBookings:p,weekBookings:g,monthBookings:N,pendingBookings:u,totalRevenue:w,totalTechnicians:C,approvedTechnicians:E,pendingTechnicians:I,rejectedTechnicians:$}},[o,t,m]);return r||l?e.jsx(y,{children:e.jsx(x,{xs:12,children:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(H,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading metrics..."})]})})}):e.jsxs(y,{children:[e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Total Bookings"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.totalBookings})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-primary bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-primary",children:e.jsx("i",{className:"uil uil-calendar-alt font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Today's Bookings"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.todayBookings})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-success bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-success",children:e.jsx("i",{className:"uil uil-calendar-check font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Pending Bookings"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.pendingBookings})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-warning bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-warning",children:e.jsx("i",{className:"uil uil-clock font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Total Revenue"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsxs("span",{children:["$",n.totalRevenue.toLocaleString()]})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-info bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-info",children:e.jsx("i",{className:"uil uil-dollar-sign font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Total Technicians"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{children:n.totalTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-purple bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-purple",children:e.jsx("i",{className:"uil uil-users-alt font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Approved"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{className:"text-success",children:n.approvedTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-success bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-success",children:e.jsx("i",{className:"uil uil-check-circle font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Pending Approval"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{className:"text-warning",children:n.pendingTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-warning bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-warning",children:e.jsx("i",{className:"uil uil-hourglass font-18"})})})})]})})})}),e.jsx(x,{sm:6,lg:3,children:e.jsx(s,{children:e.jsx(s.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("span",{className:"text-muted fw-medium text-uppercase fs-12",children:"Rejected"}),e.jsx("h3",{className:"mb-0 mt-1",children:e.jsx("span",{className:"text-danger",children:n.rejectedTechnicians})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar-sm rounded-circle bg-danger bg-soft",children:e.jsx("span",{className:"avatar-title rounded-circle bg-danger",children:e.jsx("i",{className:"uil uil-times-circle font-18"})})})})]})})})})]})},Q=()=>{const{data:a,isLoading:r}=L({pageSize:1e3}),t=(a==null?void 0:a.items)||[],l=D.useMemo(()=>{const n=new Date,h=[],j=[];for(let c=6;c>=0;c--){const d=new Date(n);d.setDate(d.getDate()-c),h.push(d.toLocaleDateString("en-US",{weekday:"short"}));const p=new Date(d.getFullYear(),d.getMonth(),d.getDate()),g=new Date(p);g.setDate(g.getDate()+1);const N=t.filter(u=>{if(!u.createdAt)return!1;const w=new Date(u.createdAt);return w>=p&&w<g}).length;j.push(N)}return{categories:h,data:j}},[t]),o={chart:{height:364,type:"line",dropShadow:{enabled:!0,opacity:.1,blur:7,left:-7,top:7},toolbar:{show:!1},zoom:{enabled:!1},parentHeightOffset:0},grid:{padding:{left:0,right:0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:4},legend:{show:!1},colors:["#727cf5"],xaxis:{categories:l.categories,tooltip:{enabled:!1},axisBorder:{show:!1}},yaxis:{labels:{formatter:function(n){return Math.round(n).toString()}}}},m=[{name:"Bookings",data:l.data}];return r?e.jsx(s,{children:e.jsxs(s.Body,{children:[e.jsx(k,{title:"Bookings Trend",menuItems:[],containerClass:""}),e.jsx("div",{className:"text-center py-5",children:e.jsx("p",{className:"text-muted",children:"Loading chart data..."})})]})}):e.jsx(s,{children:e.jsxs(s.Body,{children:[e.jsx(k,{containerClass:"d-flex align-items-center justify-content-between mb-2",title:"Bookings Trend",menuItems:[{label:"View All Bookings"},{label:"Export Report"}]}),e.jsx("div",{className:"chart-content-bg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted mb-0 mt-3",children:"Last 7 Days"}),e.jsx("h2",{className:"fw-normal mb-3",children:e.jsx("span",{children:l.data.reduce((n,h)=>n+h,0)})})]})}),e.jsx(M,{options:o,series:m,type:"line",className:"apex-charts mt-3",height:378})]})})},V=()=>{const{data:a=[],isLoading:r}=R({}),t=D.useMemo(()=>{const m=new Date,n=[],h=[];for(let j=11;j>=0;j--){const c=new Date(m.getFullYear(),m.getMonth()-j,1);n.push(c.toLocaleDateString("en-US",{month:"short"}));const d=new Date(c.getFullYear(),c.getMonth(),1),p=new Date(c.getFullYear(),c.getMonth()+1,1),g=a.filter(N=>{if(!N.createdAt)return!1;const u=new Date(N.createdAt);return u>=d&&u<p}).length;h.push(g)}return{categories:n,data:h}},[a]),l={chart:{height:260,type:"bar",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"20%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},legend:{show:!1},colors:["#727cf5"],xaxis:{categories:t.categories,axisBorder:{show:!1}},yaxis:{labels:{formatter:function(m){return Math.round(m).toString()}}},fill:{opacity:1},tooltip:{y:{formatter:function(m){return m.toString()}}}},o=[{name:"New Technicians",data:t.data}];return r?e.jsx(s,{className:"card-h-100",children:e.jsxs(s.Body,{children:[e.jsx(k,{title:"Technician Growth",menuItems:[],containerClass:""}),e.jsx("div",{className:"text-center py-5",children:e.jsx("p",{className:"text-muted",children:"Loading chart data..."})})]})}):e.jsx(s,{className:"card-h-100",children:e.jsxs(s.Body,{children:[e.jsx(k,{containerClass:"d-flex align-items-center justify-content-between mb-2",title:"Technician Growth",menuItems:[{label:"View All Technicians"},{label:"Export Report"}]}),e.jsx("div",{dir:"ltr",children:e.jsx(M,{options:l,series:o,type:"bar",className:"apex-charts",height:255})})]})})},_=()=>e.jsx(s,{children:e.jsxs(s.Body,{children:[e.jsx(k,{containerClass:"d-flex align-items-center justify-content-between",title:"Revenue By Location",menuItems:[{label:"Sales Report"},{label:"Export Report"},{label:"Profit"},{label:"Action"}]}),e.jsx("div",{className:"mb-4 mt-4"}),e.jsx("h5",{className:"mb-1 mt-0 fw-normal",children:"Quận 3"}),e.jsxs("div",{className:"progress-w-percent",children:[e.jsx("span",{className:"progress-value fw-bold",children:"72k"}),e.jsx(B,{now:72,className:"progress-sm"})]}),e.jsx("h5",{className:"mb-1 mt-0 fw-normal",children:"Quận Cam"}),e.jsxs("div",{className:"progress-w-percent",children:[e.jsx("span",{className:"progress-value fw-bold",children:"39k"}),e.jsx(B,{now:39,className:"progress-sm"})]}),e.jsx("h5",{className:"mb-1 mt-0 fw-normal",children:"Bà Chiểu"}),e.jsxs("div",{className:"progress-w-percent",children:[e.jsx("span",{className:"progress-value fw-bold",children:"25k"}),e.jsx(B,{now:25,className:"progress-sm"})]}),e.jsx("h5",{className:"mb-1 mt-0 fw-normal",children:"Ngã tư chuồng chó"}),e.jsxs("div",{className:"progress-w-percent mb-0",children:[e.jsx("span",{className:"progress-value fw-bold",children:"61k"}),e.jsx(B,{now:61,className:"progress-sm"})]})]})}),q=()=>e.jsxs(s,{children:[e.jsx(s.Body,{className:"pb-0",children:e.jsx(k,{containerClass:"d-flex align-items-center justify-content-between mb-2",title:"Recent Activity",menuItems:[{label:"Sales Report"},{label:"Export Report"},{label:"Profit"},{label:"Action"}]})}),e.jsx(Y,{style:{maxHeight:"412px",width:"100%"},children:e.jsx(s.Body,{className:"py-0",children:e.jsxs(G,{children:[e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-upload bg-info-lighten text-info timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-info fw-bold mb-1 d-block",children:"You sold an item"}),e.jsx("small",{children:"Paul Burgess just purchased “Hyper - Admin Dashboard”!"}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"5 minutes ago"})})]})]}),e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-airplane bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Product on the Bootstrap Market"}),e.jsxs("small",{children:["Dave Gamache added",e.jsx("span",{className:"fw-bold",children:"Admin Dashboard"})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"30 minutes ago"})})]})]}),e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-microphone bg-info-lighten text-info timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-info fw-bold mb-1 d-block",children:"Robert Delaney"}),e.jsxs("small",{children:["Send you message",e.jsx("span",{className:"fw-bold",children:'"Are you there?"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"2 hours ago"})})]})]}),e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-upload bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Audrey Tobey"}),e.jsxs("small",{children:["Uploaded a photo ",e.jsx("span",{className:"fw-bold",children:'"Error.jpg"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"14 hours ago"})})]})]}),e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-airplane bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Product on the Bootstrap Market"}),e.jsxs("small",{children:["Dave Gamache added",e.jsx("span",{className:"fw-bold",children:"Admin Dashboard"})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"30 minutes ago"})})]})]}),e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-microphone bg-info-lighten text-info timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-info fw-bold mb-1 d-block",children:"Robert Delaney"}),e.jsxs("small",{children:["Send you message",e.jsx("span",{className:"fw-bold",children:'"Are you there?"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"2 hours ago"})})]})]}),e.jsxs(v,{children:[e.jsx("i",{className:"mdi mdi-upload bg-primary-lighten text-primary timeline-icon"}),e.jsxs("div",{className:"timeline-item-info",children:[e.jsx(f,{to:"",className:"text-primary fw-bold mb-1 d-block",children:"Audrey Tobey"}),e.jsxs("small",{children:["Uploaded a photo ",e.jsx("span",{className:"fw-bold",children:'"Error.jpg"'})]}),e.jsx("p",{className:"mb-0 pb-2",children:e.jsx("small",{className:"text-muted",children:"14 hours ago"})})]})]})]})})})]}),pe=()=>{const[a,r]=D.useState(new Date);return e.jsxs(e.Fragment,{children:[e.jsx(y,{children:e.jsx(x,{xs:12,children:e.jsxs("div",{className:"page-title-box",children:[e.jsx("div",{className:"page-title-right",children:e.jsxs("form",{className:"d-flex",children:[e.jsx("div",{className:"input-group",children:e.jsx(F,{value:a,inputClass:"form-control-light",onChange:t=>{r(t)}})}),e.jsx(f,{to:"",className:"btn btn-primary ms-2",children:e.jsx("i",{className:"mdi mdi-autorenew"})}),e.jsx(f,{to:"",className:"btn btn-primary ms-1",children:e.jsx("i",{className:"mdi mdi-filter-variant"})})]})}),e.jsx("h4",{className:"page-title",children:"Dashboard"})]})})}),e.jsx(y,{children:e.jsx(x,{xs:12,children:e.jsx(W,{})})}),e.jsxs(y,{children:[e.jsx(x,{lg:8,children:e.jsx(Q,{})}),e.jsx(x,{lg:4,children:e.jsx(V,{})})]}),e.jsxs(y,{children:[e.jsx(x,{lg:4,children:e.jsx(_,{})}),e.jsx(x,{lg:8,children:e.jsx(q,{})})]})]})};export{pe as default};
