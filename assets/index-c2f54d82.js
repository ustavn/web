import{r as d,n as w,b as N,d as b,o as v,q as y,s as u,j as e,N as L,P as A,F as P,h as x,i as p,T as S,L as j,_ as k}from"./index-f7b06dc7.js";import{P as E}from"./PasswordInput-9cfadde0.js";import{A as _}from"./AccountWrapper-afe0214b.js";import{a as C}from"./auth-5d494de8.js";import{u as g}from"./useTranslation-83e2b329.js";import{B as h}from"./Button-b5a32908.js";import"./InputGroup-c0c42b08.js";import"./InputGroupContext-cc4d150c.js";const I=y({email:u().email("Please enter valid email").required("Please enter email"),password:u().required("Please enter password")});function U(){const[t,r]=d.useState(!1),s=w(),o=N(),{isAuthenticated:i,saveSession:c}=b(),{showNotification:l}=v(),n=d.useMemo(()=>s.state&&s.state.from?s.state.from.pathname:"/",[s.state]);return{loading:t,login:async f=>{r(!0);try{const a=await C.login(f);a.data.token&&(c({...a.data??{},token:a.data.token}),o(n))}catch(a){l({message:a.toString(),type:"error"})}finally{r(!1)}},redirectUrl:n,isAuthenticated:i}}const B=()=>{const{t}=g();return e.jsx(x,{className:"mt-3",children:e.jsx(p,{className:"text-center",children:e.jsxs("p",{className:"text-muted",children:[t("Don't have an account?"),e.jsx(j,{to:"/account/register",className:"text-muted ms-1",children:e.jsx("b",{children:t("Sign Up")})})]})})})};function $(){const{t}=g(),{loading:r,login:s,redirectUrl:o,isAuthenticated:i}=U();return e.jsxs(e.Fragment,{children:[i&&e.jsx(L,{to:o,replace:!0}),e.jsx(A,{title:"Login"}),e.jsxs(_,{bottomLinks:e.jsx(B,{}),children:[e.jsxs("div",{className:"text-center w-75 m-auto",children:[e.jsx("h4",{className:"text-dark-50 text-center mt-0 fw-bold",children:t("Sign In")}),e.jsx("p",{className:"text-muted mb-4",children:t("Enter your username and password to access admin panel.")})]}),e.jsxs(P,{onSubmit:s,schema:I,defaultValues:{email:"usta@coderthemes.com",password:"USTA"},children:[e.jsx(x,{children:e.jsx(p,{children:e.jsx(S,{name:"email",label:t("Email Address"),type:"email",placeholder:t("Enter your email"),containerClass:"mb-3"})})}),e.jsx(E,{label:t("Password"),name:"password",placeholder:t("Enter your password"),containerClass:"mb-3",children:e.jsx(j,{to:"/account/recover-password",className:"text-muted float-end",children:e.jsx("small",{children:"Forgot your password?"})})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx(h,{variant:"primary",type:"submit",disabled:r,children:t("Log In")})})]}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsxs("p",{className:"text-muted mb-2",children:["— ",t("Or login with")," —"]}),e.jsxs(h,{variant:"outline-primary",className:"w-100",onClick:async()=>{const{buildAuthorizationUrl:c,storeRedirectPath:l}=await k(()=>import("./index-f7b06dc7.js").then(m=>m.bB),["assets/index-f7b06dc7.js","assets/index-caf57547.css"]);l("/");const n=await c();window.location.href=n},children:[e.jsx("i",{className:"mdi mdi-shield-lock-outline me-1"}),t("Login with Identity Server")]}),e.jsx("p",{className:"text-muted mt-2 mb-0",style:{fontSize:"0.875rem"},children:t("Secure OAuth 2.0 authentication")})]})]})]})}export{$ as default};
