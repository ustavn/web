import{r as j,a as b,b as w,q as y,m as C,n as o,x as N,j as e,N as P,P as k,F as v,T as l,L as u}from"./index-038953f0.js";import{C as A}from"./CheckInput-2b76a4e6.js";import{P as d}from"./PasswordInput-c0c66001.js";import{A as L}from"./AccountWrapper2-8b73ffdb.js";import{S}from"./SocialLogin-58ef9a98.js";import{a as E}from"./auth-c021b3a2.js";import{u as c}from"./useTranslation-4ed3e53c.js";import{B as F}from"./Button-3bfbac80.js";import"./InputGroup-91b3fdcd.js";import"./InputGroupContext-1df12680.js";import"./logo-dark-f86ae8c1.js";function I(){const[s,r]=j.useState(!1),{t:a}=c(),n=b(),{isAuthenticated:i}=w(),{showNotification:m}=y(),p=C().shape({username:o().required(a("Please enter name")),email:o().email("Please enter valid email").required(a("Please enter email")),password1:o().required(a("Please enter password")).min(8,"Password is too short - should be 8 chars minimum").matches(/[a-zA-Z]/,"Password can only contain latin letters"),password2:o().oneOf([N("password1")],"Passwords must match")});return{loading:s,register:async({data:x})=>{const{username:h,email:g,password1:f}=x;r(!0);try{const t=await E.register({name:h,email:g,password:f});t!=null&&t.data.id&&(m({message:"Registration successful. Welcome aboard!",type:"success"}),n("/account/login"))}catch(t){m({message:t.toString(),type:"error"})}finally{r(!1)}},isAuthenticated:i,schema:p}}const R=()=>{const{t:s}=c();return e.jsx("footer",{className:"footer footer-alt",children:e.jsxs("p",{className:"text-muted",children:[s("Already have account?"),e.jsx(u,{to:"/account/login2",className:"text-muted ms-1",children:e.jsx("b",{children:s("Log In")})})]})})},J=()=>{const{t:s}=c(),{loading:r,register:a,isAuthenticated:n,schema:i}=I();return e.jsxs(e.Fragment,{children:[n&&e.jsx(P,{to:"/",replace:!0}),e.jsx(k,{title:"Register"}),e.jsxs(L,{bottomLinks:e.jsx(R,{}),children:[e.jsx("h4",{className:"mt-0",children:s("Free Sign Up")}),e.jsx("p",{className:"text-muted mb-4",children:s("Don't have an account? Create your account, it takes less than a minute.")}),e.jsxs(v,{onSubmit:a,schema:i,children:[e.jsx(l,{label:s("Full Name"),type:"text",name:"fullname",placeholder:s("Enter your name"),containerClass:"mb-3"}),e.jsx(l,{label:s("Email address"),type:"email",name:"email",placeholder:s("Enter your email"),containerClass:"mb-3"}),e.jsx(d,{label:s("Password"),name:"password",placeholder:s("Enter your password"),containerClass:"mb-3"}),e.jsx(d,{label:s("Confirm Password"),name:"password2",placeholder:s("Confirm Password"),containerClass:"mb-3"}),e.jsx(A,{label:e.jsxs(e.Fragment,{children:["I accept",e.jsx(u,{to:"",className:"text-muted",children:"Terms and Conditions"})]}),type:"checkbox",name:"checkboxsignup",containerClass:"mb-3 text-muted",defaultChecked:!0}),e.jsx("div",{className:"mb-0 d-grid text-center",children:e.jsxs(F,{variant:"primary",type:"submit",disabled:r,children:[e.jsx("i",{className:"mdi mdi-account-circle"})," ",s("Sign Up")]})}),e.jsx(S,{})]})]})]})};export{J as default};
