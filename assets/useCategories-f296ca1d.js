import{u as s}from"./useQuery-6c10f0fe.js";import{a5 as o,a6 as n}from"./index-f2719a80.js";import{u as i}from"./useMutation-2bc86ccc.js";const c="https://api.dev.usta.vn",r=o.create({baseURL:`${c}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(async e=>{const t=localStorage.getItem("_USTA_OAUTH");if(t)try{const a=JSON.parse(t);e.headers.Authorization=`Bearer ${a.accessToken}`}catch{}return e},e=>Promise.reject(e));r.interceptors.response.use(e=>e,e=>Promise.reject(e));async function u(e={}){const t=await r.get("/categories/");if(t.data.success)return t.data.data;throw new Error(t.data.error||"Failed to fetch categories")}async function y(e){const t=await r.post("/categories/",e);if(t.data.success)return t.data.data;throw new Error(t.data.error||"Failed to create category")}function m(e={}){return s({queryKey:["categories",e],queryFn:()=>u(e),staleTime:3e4,retry:2,select:t=>t||[]})}function l(){const e=n();return i({mutationFn:t=>y(t),onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}export{l as a,m as u};
