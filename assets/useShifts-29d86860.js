import{u as c}from"./useQuery-c70f6f03.js";import{a5 as u,a6 as f,ak as h}from"./index-9308ce58.js";import{u as d}from"./useMutation-c1343e68.js";const p="https://api.dev.usta.vn",o=u.create({baseURL:`${p}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{const t=localStorage.getItem("_USTA_OAUTH");if(t)try{const s=JSON.parse(t);e.headers.Authorization=`Bearer ${s.accessToken}`}catch{}return e},e=>Promise.reject(e));o.interceptors.response.use(e=>e,e=>Promise.reject(e));async function y(e={}){const t=await o.get("/shifts/",{params:e});if(t.data.success)return t.data.data;throw new Error(t.data.error||"Failed to fetch shifts")}async function m(e){var t,s,r,n;try{const a=await o.post("/shifts/",e);if(a.data.success&&a.data.data)return a.data.data;throw new Error(a.data.error||a.data.message||"Failed to create shift")}catch(a){const i=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||a.message||"Failed to create shift";throw new Error(i)}}function w(e={}){return c({queryKey:["shifts",e],queryFn:()=>y(e),staleTime:3e4,retry:2,select:t=>t||[]})}function C(){const e=f(),{showNotification:t}=h();return d({mutationFn:s=>m(s),onSuccess:()=>{e.invalidateQueries({queryKey:["shifts"]}),t({message:"Shift created successfully",type:"success"})},onError:s=>{const r=(s==null?void 0:s.message)||"Failed to create shift";t({message:r,type:"error"})}})}export{C as a,w as u};
