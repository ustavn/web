import{a as _,r as t,j as e,P as k,d as g,f as x,h as y,_ as f,R as D,c as j}from"./index-f3718d6f.js";import{u as P,a as M}from"./useZones-fad820f3.js";import{F as r}from"./Form-aa5dcb37.js";import{B as d}from"./Button-e5255a38.js";import{A as B}from"./Alert-97e29c50.js";import{S as u}from"./Spinner-dba056ca.js";import{T as E}from"./Table-79c214bf.js";import{B as b}from"./Badge-ae92dd50.js";import{M as o}from"./Modal-72de89ab.js";import"./useQuery-c64cdbe9.js";import"./useMutation-50b84c76.js";import"./ElementChildren-9e4b5230.js";import"./hook-fa472897.js";import"./AbstractModalHeader-bc0eb37f.js";import"./useWindow-41dd01a7.js";import"./hasClass-f08a7e6f.js";import"./useMergedRefs-33faaebf.js";import"./DataKey-e12315fd.js";const F=()=>{const a=_(),[m,N]=t.useState(""),[S,l]=t.useState(!1),[n,c]=t.useState({name:"",code:"",description:""}),{data:h=[],isLoading:Z,error:C}=P(),p=M(),v=h.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())||s.code.toLowerCase().includes(m.toLowerCase())),A=t.useMemo(()=>{const s=new Map;return h.forEach(i=>{s.set(i.id,i.name)}),s},[h]),w=s=>s?A.get(s)||s:"-",L=async s=>{s.preventDefault();try{await p.mutateAsync(n),l(!1),c({name:"",code:"",description:""})}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Zone Management",subName:"Apps"}),e.jsx(g,{children:e.jsx(x,{xs:12,children:e.jsx(y,{children:e.jsxs(y.Body,{children:[e.jsxs(g,{className:"mb-3",children:[e.jsx(x,{md:6,children:e.jsx(r.Control,{type:"text",placeholder:"Search zones...",value:m,onChange:s=>N(s.target.value)})}),e.jsx(x,{md:6,className:"text-end",children:e.jsxs(d,{variant:"primary",onClick:()=>l(!0),children:[e.jsx("i",{className:"uil uil-plus me-1"})," Create Zone"]})})]}),C&&e.jsxs(B,{variant:"danger",dismissible:!0,children:["Failed to load zones: ",C.message]}),Z?e.jsx("div",{className:"text-center py-5",children:e.jsx(u,{animation:"border",variant:"primary"})}):e.jsxs(E,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Parent Zone"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4 text-muted",children:"No zones found"})}):v.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{cursor:"pointer"},onClick:()=>a(`/apps/zones/${s.id}/children`),children:e.jsx("strong",{children:s.code})}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>a(`/apps/zones/${s.id}/children`),children:s.name}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>a(`/apps/zones/${s.id}/children`),children:s.description||"-"}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>a(`/apps/zones/${s.id}/children`),children:w(s.parentId)}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>a(`/apps/zones/${s.id}/children`),children:s.isActive!==void 0?s.isActive?e.jsx(b,{bg:"success",children:"Active"}):e.jsx(b,{bg:"secondary",children:"Inactive"}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>a(`/apps/zones/${s.id}/children`),children:new Date(s.createdAt).toLocaleDateString("vi-VN")}),e.jsx("td",{children:e.jsxs(d,{variant:"primary",size:"sm",onClick:i=>{i.stopPropagation(),a(`/apps/zones/${s.id}`)},children:[e.jsx("i",{className:"mdi mdi-map-marker-path me-1"}),"Geo Fence"]})})]},s.id))})]})]})})})}),e.jsxs(o,{show:S,onHide:()=>l(!1),children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"Create New Zone"})}),e.jsxs(r,{onSubmit:L,children:[e.jsxs(o.Body,{children:[e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Zone Code *"}),e.jsx(r.Control,{type:"text",placeholder:"Q5",value:n.code,onChange:s=>c({...n,code:s.target.value}),required:!0})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Zone Name *"}),e.jsx(r.Control,{type:"text",placeholder:"Quan 5",value:n.name,onChange:s=>c({...n,name:s.target.value}),required:!0})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Description"}),e.jsx(r.Control,{as:"textarea",rows:3,placeholder:"trung tam tp",value:n.description,onChange:s=>c({...n,description:s.target.value})})]})]}),e.jsxs(o.Footer,{children:[e.jsx(d,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(d,{variant:"primary",type:"submit",disabled:p.isPending,children:p.isPending?"Creating...":"Create Zone"})]})]})]})]})},R=t.lazy(()=>f(()=>import("./ChildZonesApp-c90449ed.js"),["assets/ChildZonesApp-c90449ed.js","assets/index-f3718d6f.js","assets/index-6054c063.css","assets/useZones-fad820f3.js","assets/useQuery-c64cdbe9.js","assets/useMutation-50b84c76.js","assets/Button-e5255a38.js","assets/Spinner-dba056ca.js","assets/Badge-ae92dd50.js","assets/Alert-97e29c50.js","assets/hook-fa472897.js","assets/Form-aa5dcb37.js","assets/ElementChildren-9e4b5230.js","assets/Table-79c214bf.js","assets/Modal-72de89ab.js","assets/AbstractModalHeader-bc0eb37f.js","assets/useWindow-41dd01a7.js","assets/hasClass-f08a7e6f.js","assets/useMergedRefs-33faaebf.js","assets/DataKey-e12315fd.js"])),T=t.lazy(()=>f(()=>import("./ZoneDetail-9a6a4cff.js"),["assets/ZoneDetail-9a6a4cff.js","assets/index-f3718d6f.js","assets/index-6054c063.css","assets/useZones-fad820f3.js","assets/useQuery-c64cdbe9.js","assets/useMutation-50b84c76.js","assets/Alert-97e29c50.js","assets/hook-fa472897.js","assets/Spinner-dba056ca.js","assets/Button-e5255a38.js","assets/Badge-ae92dd50.js"])),te=()=>e.jsxs(D,{children:[e.jsx(j,{index:!0,element:e.jsx(F,{})}),e.jsx(j,{path:":parentId/children",element:e.jsx(t.Suspense,{fallback:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(u,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}),children:e.jsx(R,{})})}),e.jsx(j,{path:":id",element:e.jsx(t.Suspense,{fallback:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(u,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading zone details..."})]}),children:e.jsx(T,{})})})]});export{te as default};
