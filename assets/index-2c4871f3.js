import{r as p,z as L,E as $,j as e,l as T,as as E,a6 as w,d as f,f as j,P as A,h as N}from"./index-9308ce58.js";import{u as D}from"./useQuery-c70f6f03.js";import{u as B}from"./useMutation-c1343e68.js";import{S as k}from"./Spinner-2dd1d419.js";import{F as l}from"./Form-cd0d4eb5.js";import{A as y}from"./Alert-df8dc521.js";import{a as G}from"./hook-cb2b274d.js";import{u as K,B as q}from"./Nav-f9c967cb.js";import{m as z}from"./NavContext-c57ffc4d.js";import"./ElementChildren-22165a44.js";import"./DataKey-e12315fd.js";import"./useMergedRefs-07a15c37.js";const I=p.forwardRef(({bsPrefix:a,active:o,disabled:u,eventKey:r,className:t,variant:h,action:m,as:b,...n},x)=>{a=L(a,"list-group-item");const[s,d]=K({key:z(r,n.href),active:o,...n}),i=$(c=>{if(u){c.preventDefault(),c.stopPropagation();return}s.onClick(c)});u&&n.tabIndex===void 0&&(n.tabIndex=-1,n["aria-disabled"]=!0);const g=b||(m?n.href?"a":"button":"div");return e.jsx(g,{ref:x,...n,...s,onClick:i,className:T(t,a,d.isActive&&"active",u&&"disabled",h&&`${a}-${h}`,m&&`${a}-action`)})});I.displayName="ListGroupItem";const J=I,P=p.forwardRef((a,o)=>{const{className:u,bsPrefix:r,variant:t,horizontal:h,numbered:m,as:b="div",...n}=G(a,{activeKey:"onSelect"}),x=L(r,"list-group");let s;return h&&(s=h===!0?"horizontal":`horizontal-${h}`),e.jsx(q,{ref:o,...n,as:b,className:T(u,x,t&&`${x}-${t}`,s&&`${x}-${s}`,m&&`${x}-numbered`)})});P.displayName="ListGroup";const F=Object.assign(P,{Item:J}),C=()=>e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-4 text-uppercase",children:[e.jsx("i",{className:"mdi mdi-cog me-1"})," General Settings"]}),e.jsx("p",{className:"text-muted",children:"Settings coming soon..."})]});function O(){return D({queryKey:["booking-scan-settings"],queryFn:()=>E.getSettings(),staleTime:3e4,retry:2,select:a=>a||[]})}function R(){const a=w();return B({mutationFn:o=>E.saveSettings(o),onSuccess:()=>{a.invalidateQueries({queryKey:["booking-scan-settings"]})},onError:()=>{}})}const M=()=>{const{data:a,isLoading:o,isError:u}=O(),r=R(),[t,h]=p.useState({radiusFirst:"1",radiusSecond:"1",radiusThird:"1",radiusFourth:"1",waitTime:"10"}),m=Array.from({length:15},(s,d)=>d+1).map(s=>({value:s.toString(),label:`${s} km`}));m.push({value:"all",label:"Tất cả"});const b=[5,10,15,20,25,30,35,40,45,50];p.useEffect(()=>{var s,d;if(a&&a.length>0){const i={waitTime:((d=(s=a[0])==null?void 0:s.scanIntervalMinutes)==null?void 0:d.toString())||"10"};a.forEach(g=>{const c=g.scanOrder,S=g.scanDistanceKm,v=S===-1?"all":S.toString();c===1&&(i.radiusFirst=v),c===2&&(i.radiusSecond=v),c===3&&(i.radiusThird=v),c===4&&(i.radiusFourth=v)}),h(g=>({...g,...i}))}},[a]);const n=(s,d)=>{h(i=>({...i,[s]:d}))},x=async s=>{s.preventDefault();const d=[1,2,3,4].map(i=>{const c=t[`radius${i===1?"First":i===2?"Second":i===3?"Third":"Fourth"}`],S=c==="all"?-1:parseFloat(c),v=parseInt(t.waitTime);return{scanDistanceKm:S,scanIntervalMinutes:v,scanOrder:i}});try{await r.mutateAsync(d)}catch{}};return o?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(k,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading settings..."})]}):e.jsxs(l,{onSubmit:x,children:[e.jsxs("h5",{className:"mb-4 text-uppercase",children:[e.jsx("i",{className:"mdi mdi-rocket-launch me-1"})," Job Push Engine Settings"]}),u&&e.jsx(y,{variant:"danger",className:"mb-3",children:"Failed to load settings. Please try again."}),r.isError&&e.jsx(y,{variant:"danger",className:"mb-3",children:"Failed to save settings. Please try again."}),r.isSuccess&&e.jsx(y,{variant:"success",className:"mb-3",children:"Settings saved successfully!"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"mb-2",children:"Radius"}),e.jsx("p",{className:"text-muted mb-3",children:"Cài đặt giá trị bán kính cho phép hệ thống quét tìm đối tác để đẩy job"}),e.jsxs(f,{children:[e.jsxs(j,{md:6,className:"mb-3",children:[e.jsx(l.Label,{children:"Lần đầu"}),e.jsx(l.Select,{name:"radiusFirst",value:t.radiusFirst,onChange:s=>n("radiusFirst",s.target.value),children:m.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs(j,{md:6,className:"mb-3",children:[e.jsx(l.Label,{children:"Lần 2"}),e.jsx(l.Select,{name:"radiusSecond",value:t.radiusSecond,onChange:s=>n("radiusSecond",s.target.value),children:m.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs(f,{children:[e.jsxs(j,{md:6,className:"mb-3",children:[e.jsx(l.Label,{children:"Lần 3"}),e.jsx(l.Select,{name:"radiusThird",value:t.radiusThird,onChange:s=>n("radiusThird",s.target.value),children:m.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs(j,{md:6,className:"mb-3",children:[e.jsx(l.Label,{children:"Lần 4"}),e.jsx(l.Select,{name:"radiusFourth",value:t.radiusFourth,onChange:s=>n("radiusFourth",s.target.value),children:m.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"mb-2",children:"Khoảng cách push"}),e.jsx("p",{className:"text-muted mb-3",children:"Thời gian chờ giữa các lần mở rộng bán kính quét"}),e.jsx(f,{children:e.jsxs(j,{md:6,className:"mb-3",children:[e.jsx(l.Label,{children:"Thời gian chờ"}),e.jsx(l.Select,{name:"waitTime",value:t.waitTime,onChange:s=>n("waitTime",s.target.value),children:b.map(s=>e.jsxs("option",{value:s,children:[s," Phút"]},s))})]})})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-success mt-2",disabled:r.isPending,children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(k,{animation:"border",size:"sm",className:"me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-content-save"})," Save Changes"]})})})]})},Q=()=>e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-4 text-uppercase",children:[e.jsx("i",{className:"mdi mdi-delete me-1"})," Deleted Items Settings"]}),e.jsx("p",{className:"text-muted",children:"Settings coming soon..."})]}),V=()=>e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-4 text-uppercase",children:[e.jsx("i",{className:"mdi mdi-email-alert me-1"})," Junk Emails Settings"]}),e.jsx("p",{className:"text-muted",children:"Settings coming soon..."})]}),U=()=>e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-4 text-uppercase",children:[e.jsx("i",{className:"mdi mdi-archive me-1"})," Archive Settings"]}),e.jsx("p",{className:"text-muted",children:"Settings coming soon..."})]}),_=()=>e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-4 text-uppercase",children:[e.jsx("i",{className:"mdi mdi-note-text me-1"})," Notes Settings"]}),e.jsx("p",{className:"text-muted",children:"Settings coming soon..."})]}),ce=()=>{const[a,o]=p.useState("general"),u=[{key:"general",label:"General",icon:"mdi mdi-cog"},{key:"job-push-engine",label:"Job Push Engine",icon:"mdi mdi-rocket-launch"},{key:"deleted-items",label:"Deleted Items",icon:"mdi mdi-delete"},{key:"junk-emails",label:"Junk Emails",icon:"mdi mdi-email-alert"},{key:"archive",label:"Archive",icon:"mdi mdi-archive"},{key:"notes",label:"Notes",icon:"mdi mdi-note-text"}],r=()=>{switch(a){case"general":return e.jsx(C,{});case"job-push-engine":return e.jsx(M,{});case"deleted-items":return e.jsx(Q,{});case"junk-emails":return e.jsx(V,{});case"archive":return e.jsx(U,{});case"notes":return e.jsx(_,{});default:return e.jsx(C,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Settings",subName:"Pages"}),e.jsxs(f,{children:[e.jsx(j,{lg:3,children:e.jsx(N,{children:e.jsxs(N.Body,{children:[e.jsx("h5",{className:"card-title mb-3",children:"Settings"}),e.jsx(F,{as:"ul",variant:"flush",className:"settings-menu",children:u.map(t=>e.jsxs(F.Item,{as:"li",action:!0,active:a===t.key,onClick:()=>o(t.key),className:"cursor-pointer",style:{cursor:"pointer"},children:[e.jsx("i",{className:`${t.icon} me-2`}),t.label]},t.key))})]})})}),e.jsx(j,{lg:9,children:e.jsx(N,{children:e.jsx(N.Body,{children:r()})})})]})]})};export{ce as default};
