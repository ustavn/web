import{r as p,j as e,v as r,w as Y,aZ as J,a as X,P as W,d as S,f as G,h as F,aV as y,aW as j,_ as ee,R as oe,c as V}from"./index-ce8cbde8.js";import{u as O}from"./useQuery-c8258469.js";import{u as te}from"./useMutation-352100f5.js";import{u as se}from"./useProducts-71169dbd.js";import{B as le}from"./ButtonGroup-8b5e054a.js";import{B as b}from"./Button-c6d90f45.js";import{A as L}from"./Alert-f54c2503.js";import{S as T}from"./Spinner-b86989e2.js";import{M as N}from"./Modal-bc2f312b.js";let B=!1,w=!1;const v=[],ne=({onPlaceSelected:t,value:s="",placeholder:n="Search for an address",required:u=!1})=>{const c=p.useRef(null),x=p.useRef(null),[R,M]=p.useState(!1);return p.useEffect(()=>{c.current&&s&&(c.current.value=s,console.log("[GooglePlacesAutocomplete] ğŸ”„ Updated input value from prop:",s))},[s]),p.useEffect(()=>{console.log("[GooglePlacesAutocomplete] ğŸš€ Component mounted, starting initialization..."),console.log("[GooglePlacesAutocomplete] ğŸ“‹ All env variables:",{VITE_IDENTITY_SERVER:"https://identity.dev.usta.vn",VITE_CLIENT_ID:"admin_client",VITE_SCOPES:"offline_access",VITE_REDIRECT_URI:"https://dev.usta.vn",VITE_API_SERVER:"https://api.dev.usta.vn",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyB5490SkKLDlee3fYtZj6dMOXZdy_NNZ3k",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1});const f="AIzaSyB5490SkKLDlee3fYtZj6dMOXZdy_NNZ3k";console.log("[GooglePlacesAutocomplete] ğŸ”‘ API Key found:",f.substring(0,10)+"..."),console.log("[GooglePlacesAutocomplete] ğŸ”‘ Full API Key:",f);const h=()=>{var d,m,A;if(console.log("[GooglePlacesAutocomplete] ğŸ¯ initAutocomplete called"),console.log("[GooglePlacesAutocomplete] ğŸ” Checking input ref...",c.current),!c.current){console.warn("[GooglePlacesAutocomplete] âš ï¸ Input ref not available, retrying in 100ms..."),setTimeout(h,100);return}if(console.log("[GooglePlacesAutocomplete] âœ… Input ref found:",c.current),console.log("[GooglePlacesAutocomplete] ğŸ” Checking window.google...",typeof window.google),console.log("[GooglePlacesAutocomplete] ğŸ” Checking google.maps...",typeof((d=window.google)==null?void 0:d.maps)),console.log("[GooglePlacesAutocomplete] ğŸ” Checking google.maps.places...",typeof((A=(m=window.google)==null?void 0:m.maps)==null?void 0:A.places)),!window.google||!window.google.maps||!window.google.maps.places){console.error("[GooglePlacesAutocomplete] âŒ Google Maps not fully loaded yet"),console.log("[GooglePlacesAutocomplete] ğŸ”„ Retrying in 200ms..."),setTimeout(h,200);return}console.log("[GooglePlacesAutocomplete] ğŸ¯ Creating Autocomplete instance...");try{x.current&&(console.log("[GooglePlacesAutocomplete] ğŸ§¹ Clearing existing autocomplete"),google.maps.event.clearInstanceListeners(x.current));const g={types:["geocode","establishment"],componentRestrictions:{country:"vn"},fields:["formatted_address","geometry","name"]};console.log("[GooglePlacesAutocomplete] ğŸ”§ Autocomplete options:",g),x.current=new google.maps.places.Autocomplete(c.current,g),console.log("[GooglePlacesAutocomplete] âœ… Autocomplete instance created:",x.current),console.log("[GooglePlacesAutocomplete] ğŸ” Input element classes:",c.current.className),console.log("[GooglePlacesAutocomplete] ğŸ” Input element after autocomplete:",c.current),console.warn("[GooglePlacesAutocomplete] ğŸš¨ IMPORTANT: Check browser console for Google Maps API errors!"),console.warn('[GooglePlacesAutocomplete] ğŸš¨ Look for messages like "Google Maps JavaScript API error" or "ApiNotActivatedMapError"'),console.warn("[GooglePlacesAutocomplete] ğŸš¨ Common issues:"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   1. Places API not enabled in Google Cloud Console"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   2. Billing not enabled"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   3. API key has restrictions (HTTP referrer, IP)"),console.warn("[GooglePlacesAutocomplete] ğŸš¨   4. Quota exceeded"),setTimeout(()=>{const l=document.querySelector(".pac-container");console.log("[GooglePlacesAutocomplete] ğŸ” PAC container exists:",!!l),console.log("[GooglePlacesAutocomplete] ğŸ” PAC container:",l),l&&(console.log("[GooglePlacesAutocomplete] ğŸ” PAC container styles:",window.getComputedStyle(l)),console.log("[GooglePlacesAutocomplete] ğŸ” PAC container z-index:",window.getComputedStyle(l).zIndex))},1e3),c.current.addEventListener("keydown",l=>{console.log("[GooglePlacesAutocomplete] âŒ¨ï¸ Keydown event:",l.key),setTimeout(()=>{const a=document.querySelectorAll(".pac-item");if(console.log("[GooglePlacesAutocomplete] ğŸ“‹ PAC items found:",a.length),a.length>0)console.log("[GooglePlacesAutocomplete] âœ… Suggestions are showing!");else{console.log("[GooglePlacesAutocomplete] âŒ No suggestions visible");const P=document.querySelector(".pac-container");P&&(console.log("[GooglePlacesAutocomplete] ğŸ“¦ PAC Container display:",window.getComputedStyle(P).display),console.log("[GooglePlacesAutocomplete] ğŸ“¦ PAC Container visibility:",window.getComputedStyle(P).visibility))}},500)}),console.log("[GooglePlacesAutocomplete] ğŸ§ Adding place_changed listener..."),x.current.addListener("place_changed",()=>{var P;console.log("[GooglePlacesAutocomplete] ğŸ‰ place_changed event fired!");const l=(P=x.current)==null?void 0:P.getPlace();if(console.log("[GooglePlacesAutocomplete] ğŸ“ Place data received:",l),console.log("[GooglePlacesAutocomplete] ğŸ“ Place.geometry:",l==null?void 0:l.geometry),console.log("[GooglePlacesAutocomplete] ğŸ“ Place.formatted_address:",l==null?void 0:l.formatted_address),!l||!l.geometry||!l.geometry.location){console.error("[GooglePlacesAutocomplete] âŒ No place details available"),console.error("[GooglePlacesAutocomplete] Place object:",l);return}const a={address:l.formatted_address||"",latitude:l.geometry.location.lat(),longitude:l.geometry.location.lng()};console.log("[GooglePlacesAutocomplete] âœ… Setting result:",a),c.current&&(c.current.value=a.address),console.log("[GooglePlacesAutocomplete] ğŸ“ Calling onPlaceSelected..."),t(a),console.log("[GooglePlacesAutocomplete] âœ… onPlaceSelected called successfully")}),console.log("[GooglePlacesAutocomplete] âœ… Listener added successfully"),M(!0),console.log("[GooglePlacesAutocomplete] âœ…âœ…âœ… Autocomplete initialized successfully! Ready to use.")}catch(g){console.error("[GooglePlacesAutocomplete] âŒ Error initializing autocomplete:",g),console.error("[GooglePlacesAutocomplete] Error stack:",g)}},i=()=>{if(console.log("[GooglePlacesAutocomplete] ğŸ”„ loadGoogleMaps called"),console.log("[GooglePlacesAutocomplete] ğŸ“Š State - googleMapsLoaded:",B),console.log("[GooglePlacesAutocomplete] ğŸ“Š State - googleMapsLoading:",w),console.log("[GooglePlacesAutocomplete] ğŸŒ window.google exists:",typeof window.google<"u"),B||window.google&&window.google.maps&&window.google.maps.places){console.log("[GooglePlacesAutocomplete] âœ… Google Maps already loaded, initializing now..."),B=!0,h();return}if(w){console.log("[GooglePlacesAutocomplete] â³ Google Maps is currently loading, adding callback to queue..."),console.log("[GooglePlacesAutocomplete] ğŸ“Š Current callback queue size:",v.length),v.push(h);return}const d=document.querySelector('script[src*="maps.googleapis.com"]');if(console.log("[GooglePlacesAutocomplete] ğŸ” Checking for existing script:",d),d){console.log("[GooglePlacesAutocomplete] â³ Found existing script, attaching load listener..."),console.log("[GooglePlacesAutocomplete] Script src:",d.getAttribute("src")),w=!0,d.addEventListener("load",()=>{console.log("[GooglePlacesAutocomplete] âœ… Existing script loaded successfully"),B=!0,w=!1,h(),console.log("[GooglePlacesAutocomplete] ğŸ”„ Processing",v.length,"queued callbacks"),v.forEach(g=>g()),v.length=0});return}console.log("[GooglePlacesAutocomplete] ğŸ“¥ No existing script found, creating new one...");const m=`https://maps.googleapis.com/maps/api/js?key=${f}&libraries=places`;console.log("[GooglePlacesAutocomplete] ğŸ”— Script URL:",m),w=!0;const A=document.createElement("script");A.src=m,A.async=!0,A.defer=!0,A.onload=()=>{var g,l,a;if(console.log("[GooglePlacesAutocomplete] âœ…âœ… Google Maps script loaded successfully!"),console.log("[GooglePlacesAutocomplete] ğŸ” Verifying window.google:",typeof window.google),console.log("[GooglePlacesAutocomplete] ğŸ” Verifying google.maps:",typeof((g=window.google)==null?void 0:g.maps)),console.log("[GooglePlacesAutocomplete] ğŸ” Verifying google.maps.places:",typeof((a=(l=window.google)==null?void 0:l.maps)==null?void 0:a.places)),window.google&&window.google.maps){const P=window.google.maps;console.log("[GooglePlacesAutocomplete] ğŸ” Google Maps object:",P),P.__gjsload__&&console.log("[GooglePlacesAutocomplete] âš ï¸ Maps loaded but check console for API key errors")}B=!0,w=!1,h(),console.log("[GooglePlacesAutocomplete] ğŸ”„ Processing",v.length,"queued callbacks"),v.forEach(P=>P()),v.length=0},A.onerror=g=>{console.error("[GooglePlacesAutocomplete] âŒâŒ Failed to load Google Maps script!"),console.error("[GooglePlacesAutocomplete] Error:",g),console.error("[GooglePlacesAutocomplete] Script URL was:",m),w=!1},console.log("[GooglePlacesAutocomplete] ğŸ“Œ Appending script to document.head..."),document.head.appendChild(A),console.log("[GooglePlacesAutocomplete] âœ… Script tag added to DOM")};return console.log("[GooglePlacesAutocomplete] ğŸš€ Starting loadGoogleMaps..."),i(),console.log("[GooglePlacesAutocomplete] âœ… loadGoogleMaps initiated"),()=>{if(console.log("[GooglePlacesAutocomplete] ğŸ§¹ Component unmounting, cleaning up..."),x.current&&window.google&&window.google.maps)try{google.maps.event.clearInstanceListeners(x.current),console.log("[GooglePlacesAutocomplete] âœ… Cleanup completed")}catch(d){console.log("[GooglePlacesAutocomplete] âš ï¸ Cleanup error (safe to ignore):",d)}}},[t]),console.log("[GooglePlacesAutocomplete] ğŸ¨ Rendering component, isReady:",R),e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
				.pac-container {
					z-index: 9999 !important;
					position: fixed !important;
				}
			`}),e.jsx("div",{style:{position:"relative"},children:e.jsx(r.Control,{ref:c,type:"text",defaultValue:s,onFocus:()=>{console.log("[GooglePlacesAutocomplete] ğŸ¯ Input focused"),setTimeout(()=>{const f=document.querySelector(".pac-container");console.log("[GooglePlacesAutocomplete] ğŸ” After focus - PAC container:",f)},100)},onBlur:()=>console.log("[GooglePlacesAutocomplete] ğŸ‘‹ Input blurred"),onInput:f=>{const h=f.target.value;console.log("[GooglePlacesAutocomplete] âŒ¨ï¸ User typing:",h),setTimeout(()=>{const i=document.querySelector(".pac-container"),d=document.querySelectorAll(".pac-item");if(console.log("[GooglePlacesAutocomplete] ğŸ“Š After input - PAC container:",i),console.log("[GooglePlacesAutocomplete] ğŸ“Š After input - PAC items count:",d.length),i){const m=window.getComputedStyle(i);console.log("[GooglePlacesAutocomplete] ğŸ“Š PAC display:",m.display),console.log("[GooglePlacesAutocomplete] ğŸ“Š PAC visibility:",m.visibility),console.log("[GooglePlacesAutocomplete] ğŸ“Š PAC z-index:",m.zIndex)}},300)},placeholder:n,required:u,autoComplete:"off",id:"google-places-autocomplete-input"})})]})},U="https://api.dev.usta.vn",_=Y.create({baseURL:`${U}/api`,timeout:3e4,headers:{"Content-Type":"application/json"}});_.interceptors.request.use(async t=>{const s=localStorage.getItem("_USTA_OAUTH");if(s)try{const n=JSON.parse(s);t.headers.Authorization=`Bearer ${n.accessToken}`,console.log("[Booking API] Request:",{method:t.method,url:t.url,params:t.params,data:t.data,hasAuth:!!t.headers.Authorization})}catch(n){console.error("[Booking API] Failed to parse OAuth session:",n)}else console.warn("[Booking API] No OAuth session found");return t},t=>(console.error("[Booking API] Request error:",t),Promise.reject(t)));_.interceptors.response.use(t=>(console.log("[Booking API] Response:",{status:t.status,url:t.config.url,data:t.data}),t),t=>{var s,n,u;return console.error("[Booking API] Response error:",{status:(s=t.response)==null?void 0:s.status,url:(n=t.config)==null?void 0:n.url,data:(u=t.response)==null?void 0:u.data,message:t.message}),Promise.reject(t)});async function ae(t={}){const{page:s=1,pageSize:n=10}=t;console.log("[Booking API] Fetching bookings:",{page:s,pageSize:n});const u=await _.get("/bookings",{params:{page:s,pageSize:n}});return u.data.success&&u.data.data?{items:u.data.data.items||[],total:u.data.data.totalCount||0,page:u.data.data.page||s,pageSize:u.data.data.pageSize||n,totalPages:u.data.data.totalPages||1}:u.data}async function ce(t){console.log("[Booking API] Creating booking:",t);const s=await _.post("/bookings/",t);return console.log("[Booking API] Booking created successfully:",s.data),s.data}async function re(t){var s;console.log("[Booking API] Fetching booking by ID:",t),console.log("[Booking API] Full URL will be:",`${U}/api/bookings/${t}`);try{const n=await _.get(`/bookings/${t}`);if(console.log("[Booking API] Raw response:",n.data),n.data&&typeof n.data=="object"&&"success"in n.data){const c=n.data;if(c.success&&c.data)return console.log("[Booking API] Returning wrapped data:",c.data),c.data}return console.log("[Booking API] Treating as direct response"),n.data}catch(n){throw console.error("[Booking API] Error fetching booking:",n),console.error("[Booking API] Error response:",(s=n.response)==null?void 0:s.data),n}}function ie(t={}){return O({queryKey:["bookings",t],queryFn:()=>ae(t),staleTime:3e4,retry:2})}function ve(t){console.log("[useBooking] Hook called with id:",t);const s=O({queryKey:["booking",t],queryFn:()=>(console.log("[useBooking] Query function called, fetching booking:",t),re(t)),enabled:!!t&&t.length>0,staleTime:3e4,retry:2});return console.log("[useBooking] Query state:",{isLoading:s.isLoading,isFetching:s.isFetching,isError:s.isError,enabled:!!t&&t.length>0,data:s.data}),s}function de(){const t=J();return te({mutationFn:s=>ce(s),onSuccess:s=>{console.log("[useCreateBooking] Booking created successfully:",s),t.invalidateQueries({queryKey:["bookings"]})},onError:s=>{console.error("[useCreateBooking] Failed to create booking:",s)}})}const ge=()=>{var z;const t=X(),[s,n]=p.useState(1),[u]=p.useState(10),[c,x]=p.useState("new"),[R,M]=p.useState(""),[f,h]=p.useState(!1),[i,d]=p.useState({bookingTime:"",customerId:"",customerName:"",customerPhone:"",latitude:0,longitude:0,address:"",items:[]}),[m,A]=p.useState(""),[g,l]=p.useState(1),{data:a,isLoading:P,error:D,refetch:K}=ie({page:s,pageSize:u}),k=de(),{data:q=[],isLoading:Q}=se(),I={new:(a==null?void 0:a.total)||0,verification:0,approval:0,processed:0},Z=async o=>{if(o.preventDefault(),!m){alert("Please select a product");return}try{const C={...i,bookingTime:new Date(i.bookingTime).toISOString(),items:[{productId:m,quantity:g}]};await k.mutateAsync(C),h(!1),d({bookingTime:"",customerId:"",customerName:"",customerPhone:"",latitude:0,longitude:0,address:"",items:[]}),A(""),l(1)}catch(C){console.error("Failed to create booking:",C)}},$=o=>{d(C=>({...C,address:o.address,latitude:o.latitude,longitude:o.longitude}))},E=(o=>q.find(C=>C.id===o))(m),H=(a==null?void 0:a.items)||[];return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Booking Management",subName:"Apps"}),e.jsx(S,{children:e.jsx(G,{xs:12,children:e.jsx(F,{children:e.jsxs(F.Body,{children:[e.jsxs(y,{variant:"tabs",className:"nav-bordered mb-4",children:[e.jsx(y.Item,{children:e.jsxs(y.Link,{active:c==="new",onClick:()=>x("new"),className:"d-flex align-items-center gap-2",children:["New",I.new>0&&e.jsx(j,{bg:"danger",className:"ms-1",children:I.new})]})}),e.jsx(y.Item,{children:e.jsxs(y.Link,{active:c==="verification",onClick:()=>x("verification"),className:"d-flex align-items-center gap-2",children:["Verification Due",I.verification>0]})}),e.jsx(y.Item,{children:e.jsxs(y.Link,{active:c==="approval",onClick:()=>x("approval"),className:"d-flex align-items-center gap-2",children:["Approval Due",I.approval>0]})}),e.jsx(y.Item,{children:e.jsxs(y.Link,{active:c==="processed",onClick:()=>x("processed"),className:"d-flex align-items-center gap-2",children:["Processed",I.processed>0]})})]}),e.jsx(S,{className:"mb-4",children:e.jsx(G,{md:12,children:e.jsxs("div",{className:"position-relative",children:[e.jsx("i",{className:"mdi mdi-magnify position-absolute top-50 start-0 translate-middle-y ms-3 text-muted",style:{fontSize:"18px"}}),e.jsx(r.Control,{type:"text",placeholder:"Search bookings by customer name...",value:R,onChange:o=>M(o.target.value),className:"ps-5"})]})})}),e.jsx(S,{className:"mb-4",children:e.jsx(G,{xs:12,children:e.jsxs(le,{className:"mb-2",children:[e.jsxs(b,{variant:"primary",size:"sm",onClick:()=>h(!0),children:[e.jsx("i",{className:"mdi mdi-plus me-1"}),"Create Booking"]}),e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>K(),children:[e.jsx("i",{className:"mdi mdi-refresh me-1"}),"Reload"]})]})})}),D&&e.jsxs(L,{variant:"danger",children:[e.jsx("strong",{children:"Error:"})," ",D instanceof Error?D.message:"Failed to load bookings"]}),P?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(T,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading bookings..."})]}):a!=null&&a.items&&a.items.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-centered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Booking Time"}),e.jsx("th",{children:"Items"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"})]})}),e.jsx("tbody",{children:H.map(o=>e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>t(`/apps/booking/${o.id}`),children:[e.jsx("td",{children:e.jsx("strong",{children:o.customerName||"N/A"})}),e.jsx("td",{children:o.customerPhone||"-"}),e.jsx("td",{className:"text-muted",children:e.jsx("small",{children:o.address||"-"})}),e.jsx("td",{children:new Date(o.bookingTime).toLocaleString("vi-VN")}),e.jsx("td",{children:o.items&&o.items.length>0?e.jsxs(j,{bg:"info",children:[o.items.length," items"]}):o.totalPrice?e.jsxs(j,{bg:"secondary",children:[o.totalPrice.toLocaleString("vi-VN")," VND"]}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx("td",{children:typeof o.status=="number"?e.jsxs(e.Fragment,{children:[o.status===1&&e.jsx(j,{bg:"info",children:"Created"}),o.status===2&&e.jsx(j,{bg:"primary",children:"Assigned"}),o.status===3&&e.jsx(j,{bg:"warning",children:"In Progress"}),o.status===4&&e.jsx(j,{bg:"success",children:"Done"}),o.status===5&&e.jsx(j,{bg:"danger",children:"Failed"}),o.status===6&&e.jsx(j,{bg:"secondary",children:"Cancelled"}),[1,2,3,4,5,6].indexOf(o.status)===-1&&e.jsxs(j,{bg:"secondary",children:["Status ",o.status]})]}):e.jsx(j,{bg:"info",children:o.status||"Unknown"})}),e.jsx("td",{children:o.createdAt?new Date(o.createdAt).toLocaleDateString("vi-VN"):"-"})]},o.id))})]})}),e.jsx(S,{className:"mt-4",children:e.jsx(G,{xs:12,children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted",children:["Showing ",a.items.length," of ",a.total," bookings"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(b,{variant:"secondary",size:"sm",disabled:s===1,onClick:()=>n(s-1),children:"Previous"}),e.jsxs(b,{variant:"secondary",size:"sm",disabled:!0,children:["Page ",s," of ",a.totalPages]}),e.jsx(b,{variant:"secondary",size:"sm",disabled:s>=a.totalPages,onClick:()=>n(s+1),children:"Next"})]})]})})})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("p",{className:"text-muted",children:"No bookings found"}),e.jsx(b,{variant:"primary",onClick:()=>h(!0),children:"Create First Booking"})]})]})})})}),e.jsxs(N,{show:f,onHide:()=>h(!1),size:"lg",children:[e.jsx(N.Header,{closeButton:!0,children:e.jsx(N.Title,{children:"Create New Booking"})}),e.jsxs(r,{onSubmit:Z,children:[e.jsxs(N.Body,{children:[k.isError&&e.jsxs(L,{variant:"danger",dismissible:!0,children:["Failed to create booking: ",((z=k.error)==null?void 0:z.message)||"Unknown error"]}),e.jsxs(S,{children:[e.jsx(G,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Customer Name *"}),e.jsx(r.Control,{type:"text",placeholder:"Enter customer name",value:i.customerName,onChange:o=>d({...i,customerName:o.target.value}),required:!0})]})}),e.jsx(G,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Customer Phone *"}),e.jsx(r.Control,{type:"tel",placeholder:"0352978519",value:i.customerPhone,onChange:o=>d({...i,customerPhone:o.target.value}),required:!0})]})})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Customer ID *"}),e.jsx(r.Control,{type:"text",placeholder:"Enter customer ID (UUID)",value:i.customerId,onChange:o=>d({...i,customerId:o.target.value}),required:!0})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Address *"}),e.jsx(ne,{value:i.address,onPlaceSelected:$,placeholder:"Search for an address using Google Maps",required:!0})]}),i.latitude!==0&&i.longitude!==0&&e.jsx(L,{variant:"info",className:"mb-3",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Coordinates:"})," ",i.latitude.toFixed(6),", ",i.longitude.toFixed(6)]})}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Booking Time *"}),e.jsx(r.Control,{type:"datetime-local",value:i.bookingTime,onChange:o=>d({...i,bookingTime:o.target.value}),required:!0})]}),e.jsxs(S,{children:[e.jsx(G,{md:8,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Select Product *"}),Q?e.jsxs("div",{className:"text-center py-2",children:[e.jsx(T,{animation:"border",size:"sm"}),e.jsx("span",{className:"ms-2",children:"Loading products..."})]}):e.jsxs(r.Select,{value:m,onChange:o=>A(o.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Select a product --"}),q.map(o=>e.jsxs("option",{value:o.id,children:[o.name," - ",o.price.toLocaleString("vi-VN")," VND"]},o.id))]})]})}),e.jsx(G,{md:4,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Quantity *"}),e.jsx(r.Control,{type:"number",min:"1",value:g,onChange:o=>l(parseInt(o.target.value)||1),required:!0})]})})]}),E&&e.jsxs(L,{variant:"info",className:"mb-3",children:[e.jsx("strong",{children:"Selected:"})," ",E.name," x ",g,e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:E.description}),e.jsx("hr",{className:"my-2"}),e.jsxs("strong",{children:["Total: ",(E.price*g).toLocaleString("vi-VN")," VND"]})]})]}),e.jsxs(N.Footer,{children:[e.jsx(b,{variant:"secondary",onClick:()=>h(!1),disabled:k.isPending,children:"Cancel"}),e.jsx(b,{variant:"primary",type:"submit",disabled:k.isPending||!m||!i.address,children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx(T,{animation:"border",size:"sm",className:"me-2"}),"Creating..."]}):"Create Booking"})]})]})]})]})},ue=p.lazy(()=>ee(()=>import("./BookingDetail-f24c4727.js"),["assets/BookingDetail-f24c4727.js","assets/index-ce8cbde8.js","assets/index-caf57547.css","assets/useProducts-71169dbd.js","assets/useQuery-c8258469.js","assets/useMutation-352100f5.js","assets/Alert-f54c2503.js","assets/Spinner-b86989e2.js","assets/Button-c6d90f45.js","assets/Table-129428d5.js","assets/ButtonGroup-8b5e054a.js","assets/Modal-bc2f312b.js"])),me=()=>(console.log("[Booking] Routes component rendered"),e.jsxs(oe,{children:[e.jsx(V,{index:!0,element:e.jsx(ge,{})}),e.jsx(V,{path:":id",element:e.jsx(p.Suspense,{fallback:e.jsxs("div",{className:"text-center py-5",children:[e.jsx(T,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading booking details..."})]}),children:e.jsx(ue,{})})})]})),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{Ce as i,ve as u};
